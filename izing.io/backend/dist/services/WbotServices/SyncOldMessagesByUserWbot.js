'use strict';
const _0x58d486 = _0x11c8;
(function (_0x2cd7a8, _0x53a5d1) {
    const _0x226860 = _0x11c8, _0x499a5b = _0x2cd7a8();
    while (!![]) {
        try {
            const _0x15dcbd = parseInt(_0x226860(0x231)) / (0xa5f + 0x2154 + -0x2bb2) * (-parseInt(_0x226860(0x214)) / (0xabd + -0xa08 + 0xb3 * -0x1)) + -parseInt(_0x226860(0x219)) / (0xcd9 + -0x1e33 + 0x27b * 0x7) + -parseInt(_0x226860(0x1fb)) / (-0x5 * 0x68e + -0x1290 + 0x335a) + -parseInt(_0x226860(0x211)) / (-0x1e8a + -0x1 * 0x8ab + 0x1 * 0x273a) + -parseInt(_0x226860(0x204)) / (-0x1 * -0xffc + -0x1d69 + 0xd73) * (-parseInt(_0x226860(0x216)) / (0x9 * 0x1f1 + 0x575 + -0xd * 0x1c3)) + parseInt(_0x226860(0x1e9)) / (-0xc1 * -0x21 + -0x150 + -0x1789) * (parseInt(_0x226860(0x23a)) / (-0x7a5 * 0x2 + 0x527 * -0x1 + 0x1 * 0x147a)) + parseInt(_0x226860(0x213)) / (-0x355 * -0x1 + -0x709 * -0x1 + 0x1 * -0xa54);
            if (_0x15dcbd === _0x53a5d1)
                break;
            else
                _0x499a5b['push'](_0x499a5b['shift']());
        } catch (_0x1a8163) {
            _0x499a5b['push'](_0x499a5b['shift']());
        }
    }
}(_0x1181, -0xe * 0xd80b + -0xd97f0 + 0x2664ec));
var __awaiter = this && this[_0x58d486(0x223)] || function (_0x1655fb, _0x77198a, _0x280229, _0x44535f) {
        const _0x5d1a50 = _0x58d486, _0x3421d2 = {
                'cFEGV': function (_0xeca4cb, _0x4932e8) {
                    return _0xeca4cb(_0x4932e8);
                },
                'SDwHL': function (_0xb9f117, _0x11718d) {
                    return _0xb9f117 instanceof _0x11718d;
                },
                'FXqGs': function (_0x154aab, _0x529342) {
                    return _0x154aab(_0x529342);
                },
                'AQczn': function (_0x3ef2c5, _0x130163) {
                    return _0x3ef2c5(_0x130163);
                },
                'bvhAU': _0x5d1a50(0x203),
                'tPTIv': function (_0xcd761e, _0x1c8086) {
                    return _0xcd761e(_0x1c8086);
                }
            };
        function _0x3657e6(_0x379dde) {
            const _0x38f36c = _0x5d1a50;
            return _0x3421d2[_0x38f36c(0x262)](_0x379dde, _0x280229) ? _0x379dde : new _0x280229(function (_0x2274ce) {
                const _0x5bfd86 = _0x38f36c;
                _0x3421d2[_0x5bfd86(0x1f8)](_0x2274ce, _0x379dde);
            });
        }
        return new (_0x280229 || (_0x280229 = Promise))(function (_0x5bd96a, _0x4b2935) {
            const _0x386b5b = _0x5d1a50, _0x100748 = {
                    'gqLbk': function (_0x3d842e, _0x412479) {
                        const _0x501923 = _0x11c8;
                        return _0x3421d2[_0x501923(0x232)](_0x3d842e, _0x412479);
                    }
                };
            function _0xec0d70(_0x580b16) {
                const _0x4a73b2 = _0x11c8;
                try {
                    _0x3421d2[_0x4a73b2(0x22f)](_0x4adfef, _0x44535f[_0x4a73b2(0x209)](_0x580b16));
                } catch (_0x54ad6a) {
                    _0x3421d2[_0x4a73b2(0x23e)](_0x4b2935, _0x54ad6a);
                }
            }
            function _0x5042b4(_0x1c6bd5) {
                const _0x247b16 = _0x11c8;
                try {
                    _0x3421d2[_0x247b16(0x1f8)](_0x4adfef, _0x44535f[_0x3421d2[_0x247b16(0x258)]](_0x1c6bd5));
                } catch (_0x16aca8) {
                    _0x3421d2[_0x247b16(0x1f8)](_0x4b2935, _0x16aca8);
                }
            }
            function _0x4adfef(_0x504c4c) {
                const _0x562c82 = _0x11c8;
                _0x504c4c[_0x562c82(0x25f)] ? _0x100748[_0x562c82(0x248)](_0x5bd96a, _0x504c4c[_0x562c82(0x24d)]) : _0x100748[_0x562c82(0x248)](_0x3657e6, _0x504c4c[_0x562c82(0x24d)])[_0x562c82(0x243)](_0xec0d70, _0x5042b4);
            }
            _0x3421d2[_0x386b5b(0x22f)](_0x4adfef, (_0x44535f = _0x44535f[_0x386b5b(0x251)](_0x1655fb, _0x77198a || []))[_0x386b5b(0x209)]());
        });
    }, __importDefault = this && this[_0x58d486(0x201) + _0x58d486(0x1ea)] || function (_0x2b3fbe) {
        const _0x3aa9a7 = _0x58d486;
        return _0x2b3fbe && _0x2b3fbe[_0x3aa9a7(0x22c)] ? _0x2b3fbe : { 'default': _0x2b3fbe };
    };
function _0x11c8(_0x3163c1, _0x2355f5) {
    const _0x29f0f1 = _0x1181();
    return _0x11c8 = function (_0x23fc08, _0x2bcd33) {
        _0x23fc08 = _0x23fc08 - (0x1aca + -0x1f86 + 0x6a4);
        let _0x4bd447 = _0x29f0f1[_0x23fc08];
        return _0x4bd447;
    }, _0x11c8(_0x3163c1, _0x2355f5);
}
const _0xafb7e7 = {};
_0xafb7e7[_0x58d486(0x24d)] = !![], Object[_0x58d486(0x221) + _0x58d486(0x23f)](exports, _0x58d486(0x22c), _0xafb7e7);
function _0x1181() {
    const _0x568657 = [
        'error',
        'done',
        'unreadMess',
        'ack',
        'SDwHL',
        'age',
        '8hIqVJz',
        'fault',
        'whatsappId',
        'tenantId',
        'ervices/Fi',
        'incronizad',
        'r\x20usuário:',
        'messageId',
        'YVpIQ',
        'HcfEy',
        'ByLyk',
        'TicketServ',
        's/logger',
        'default',
        'logger',
        'cFEGV',
        'RWWRK',
        'ls/Ticket',
        '762756ZJBvno',
        'format',
        'zVYjq',
        'pihSL',
        'ice',
        'contact',
        '__importDe',
        'NdqOE',
        'throw',
        '462XHwEYx',
        'XjMyf',
        'ezone',
        'ndOrCreate',
        'VerifyMess',
        'next',
        'Sincroniza',
        'whatsapp',
        'syncTime',
        '../../mode',
        'timestamp',
        'ById',
        'ddKhG',
        '5751135XIGTRe',
        'antigas\x20po',
        '10978660AVyUqW',
        '8HCUiot',
        'VerifyCont',
        '60403SNxPhl',
        'unix',
        '../../util',
        '1144194QuqAry',
        'a\x20por\x20usuá',
        'limit',
        'DD-MM-YYYY',
        'ticket',
        'ketWbotByI',
        'ers/socket',
        'InHOn',
        'defineProp',
        'ers/GetTic',
        '__awaiter',
        'getChat',
        'ls/Message',
        'update',
        'io:\x20',
        'mensagens\x20',
        'ages',
        'moment-tim',
        './helpers/',
        '__esModule',
        '\x20HH:mm:ss',
        'hasMedia',
        'FXqGs',
        'xists',
        '86293ogHUut',
        'tPTIv',
        '\x20already\x20e',
        'America/Sa',
        'ZrlZV',
        'rio:\x20',
        'Dfkjk',
        'fetchMessa',
        'ens\x20antiga',
        '10406061TSgOgQ',
        'o_Paulo',
        'TVhyw',
        'quotedMsg',
        'AQczn',
        'erty',
        'KQwbi',
        'Erro\x20ao\x20si',
        'apiConfig',
        'then',
        'ncronizar\x20',
        'ges',
        'channel',
        'chat:updat',
        'gqLbk',
        'where',
        'type',
        'ndo\x20mensag',
        'VerifyMedi',
        'value',
        'HaBCF',
        'unreadCoun',
        'isSync',
        'apply',
        '../../help',
        'aMessage',
        'findOne',
        'getContact',
        'info',
        '../TicketS',
        'bvhAU',
        'Emit',
        'act',
        's\x20do\x20usuár',
        'Mensagem\x20s',
        'payload'
    ];
    _0x1181 = function () {
        return _0x568657;
    };
    return _0x1181();
}
const logger_1 = require(_0x58d486(0x218) + _0x58d486(0x1f5)), FindOrCreateTicketService_1 = __importDefault(require(_0x58d486(0x257) + _0x58d486(0x1ed) + _0x58d486(0x207) + _0x58d486(0x1f4) + _0x58d486(0x1ff))), VerifyContact_1 = __importDefault(require(_0x58d486(0x22b) + _0x58d486(0x215) + _0x58d486(0x25a))), VerifyMediaMessage_1 = __importDefault(require(_0x58d486(0x22b) + _0x58d486(0x24c) + _0x58d486(0x253))), VerifyMessage_1 = __importDefault(require(_0x58d486(0x22b) + _0x58d486(0x208) + _0x58d486(0x1e8))), GetTicketWbotById_1 = __importDefault(require(_0x58d486(0x252) + _0x58d486(0x222) + _0x58d486(0x21e) + 'd')), Message_1 = __importDefault(require(_0x58d486(0x20d) + _0x58d486(0x225))), Ticket_1 = __importDefault(require(_0x58d486(0x20d) + _0x58d486(0x1fa))), socketEmit_1 = __importDefault(require(_0x58d486(0x252) + _0x58d486(0x21f) + _0x58d486(0x259))), moment_timezone_1 = __importDefault(require(_0x58d486(0x22a) + _0x58d486(0x206))), delay = _0x29e79c => new Promise(_0x25b023 => setTimeout(_0x25b023, _0x29e79c)), SyncOldMessagesByUserWbot = (_0x18cf83, _0x476cc9, _0x3f1229, _0x239522) => __awaiter(void (0x17ae + 0xc11 * 0x1 + -0x23bf), void (0x1 * 0x13de + 0x132d + -0x270b), void (-0x1 * -0x4ed + 0x167f + -0x924 * 0x3), function* () {
        const _0xf12749 = _0x58d486, _0x3f9ee2 = {
                'KQwbi': function (_0x435335, _0x567336) {
                    return _0x435335 + _0x567336;
                },
                'zVYjq': _0xf12749(0x20a) + _0xf12749(0x24b) + _0xf12749(0x239) + _0xf12749(0x25b) + _0xf12749(0x227),
                'pihSL': _0xf12749(0x20b),
                'NdqOE': _0xf12749(0x233) + _0xf12749(0x230),
                'ddKhG': _0xf12749(0x200),
                'TVhyw': _0xf12749(0x21d),
                'ByLyk': _0xf12749(0x1ec),
                'YVpIQ': _0xf12749(0x242),
                'XjMyf': _0xf12749(0x23d),
                'InHOn': _0xf12749(0x234) + _0xf12749(0x23b),
                'RWWRK': _0xf12749(0x21c) + _0xf12749(0x22d),
                'HaBCF': _0xf12749(0x247) + 'e',
                'HcfEy': _0xf12749(0x25c) + _0xf12749(0x1ee) + _0xf12749(0x21a) + _0xf12749(0x236),
                'ZrlZV': function (_0x4f74a1, _0x63603d) {
                    return _0x4f74a1(_0x63603d);
                },
                'Dfkjk': _0xf12749(0x241) + _0xf12749(0x244) + _0xf12749(0x228) + _0xf12749(0x212) + _0xf12749(0x1ef) + '\x20'
            };
        try {
            const _0x4ec715 = yield (-0x8c * -0xd + -0x1238 + 0xb1c, GetTicketWbotById_1[_0xf12749(0x1f6)])(_0x18cf83), _0x227bf3 = yield _0x4ec715[_0xf12749(0x255) + _0xf12749(0x20f)](_0x239522), _0x1bd5dc = yield _0x227bf3[_0xf12749(0x224)](), _0x2141d8 = {};
            _0x2141d8[_0xf12749(0x21b)] = _0x3f1229;
            let _0x59087c = yield _0x1bd5dc[_0xf12749(0x238) + _0xf12749(0x245)](_0x2141d8);
            logger_1[_0xf12749(0x1f7)][_0xf12749(0x256)](_0x3f9ee2[_0xf12749(0x240)](_0x3f9ee2[_0xf12749(0x1fd)], _0x239522));
            for (const _0x4abf44 of _0x59087c) {
                const _0x52c6ce = yield _0x1bd5dc[_0xf12749(0x255)](), _0x40a9bf = yield (-0x16e6 + -0x38b * -0x9 + -0x8fd, VerifyContact_1[_0xf12749(0x1f6)])(_0x52c6ce, _0x476cc9), _0x8da060 = {};
                _0x8da060[_0xf12749(0x200)] = _0x40a9bf, _0x8da060[_0xf12749(0x1eb)] = _0x18cf83, _0x8da060[_0xf12749(0x260) + _0xf12749(0x229)] = _0x1bd5dc[_0xf12749(0x24f) + 't'], _0x8da060[_0xf12749(0x1ec)] = _0x476cc9, _0x8da060[_0xf12749(0x250)] = !![], _0x8da060[_0xf12749(0x246)] = _0x3f9ee2[_0xf12749(0x1fe)];
                const _0x28fb2f = yield (0x1f * 0x61 + -0xf * 0x259 + 0x2ef * 0x8, FindOrCreateTicketService_1[_0xf12749(0x1f6)])(_0x8da060), _0x25bb04 = {};
                _0x25bb04[_0xf12749(0x1f0)] = _0x4abf44['id']['id'], _0x25bb04[_0xf12749(0x1ec)] = _0x476cc9;
                const _0xfac5a5 = {};
                _0xfac5a5[_0xf12749(0x249)] = _0x25bb04;
                const _0x361e1d = yield Message_1[_0xf12749(0x1f6)][_0xf12749(0x254)](_0xfac5a5);
                _0x361e1d && logger_1[_0xf12749(0x1f7)][_0xf12749(0x256)](_0x3f9ee2[_0xf12749(0x240)](_0x4abf44['id']['id'], _0x3f9ee2[_0xf12749(0x202)]));
                if (!_0x361e1d) {
                    _0x4abf44[_0xf12749(0x22e)] ? yield (0x80d + -0x2d * -0xa6 + -0x9 * 0x423, VerifyMediaMessage_1[_0xf12749(0x1f6)])(_0x4abf44, _0x28fb2f, _0x40a9bf) : yield (-0x1ffb * 0x1 + 0x34a + 0x1cb1, VerifyMessage_1[_0xf12749(0x1f6)])(_0x4abf44, _0x28fb2f, _0x40a9bf);
                    const _0x3a870a = {};
                    _0x3a870a[_0xf12749(0x1f0)] = _0x4abf44['id']['id'];
                    const _0x458ef2 = yield Message_1[_0xf12749(0x1f6)][_0xf12749(0x254)]({
                        'where': _0x3a870a,
                        'include': [
                            _0x3f9ee2[_0xf12749(0x210)],
                            {
                                'model': Ticket_1[_0xf12749(0x1f6)],
                                'as': _0x3f9ee2[_0xf12749(0x23c)],
                                'attributes': [
                                    'id',
                                    _0x3f9ee2[_0xf12749(0x1f3)],
                                    _0x3f9ee2[_0xf12749(0x1f1)]
                                ]
                            },
                            {
                                'model': Message_1[_0xf12749(0x1f6)],
                                'as': _0x3f9ee2[_0xf12749(0x205)],
                                'include': [_0x3f9ee2[_0xf12749(0x210)]]
                            }
                        ]
                    });
                    if (_0x458ef2) {
                        const _0x116f35 = moment_timezone_1[_0xf12749(0x1f6)][_0xf12749(0x217)](_0x4abf44[_0xf12749(0x20e)])['tz'](_0x3f9ee2[_0xf12749(0x220)]), _0x139d7d = _0x116f35[_0xf12749(0x1fc)](_0x3f9ee2[_0xf12749(0x1f9)]), _0xdf373a = {};
                        _0xdf373a[_0xf12749(0x261)] = 0x2, _0xdf373a[_0xf12749(0x20c)] = _0x139d7d, yield _0x458ef2[_0xf12749(0x226)](_0xdf373a);
                        const {ticket: _0x105fb1} = _0x458ef2, _0x4691c4 = {};
                        _0x4691c4[_0xf12749(0x1ec)] = _0x105fb1[_0xf12749(0x1ec)], _0x4691c4[_0xf12749(0x24a)] = _0x3f9ee2[_0xf12749(0x24e)], _0x4691c4[_0xf12749(0x25d)] = _0x458ef2, (-0x1 * -0xaad + 0x10f1 + 0x2 * -0xdcf, socketEmit_1[_0xf12749(0x1f6)])(_0x4691c4);
                    }
                    logger_1[_0xf12749(0x1f7)][_0xf12749(0x256)](_0x3f9ee2[_0xf12749(0x240)](_0x3f9ee2[_0xf12749(0x1f2)], _0x4abf44['id']));
                }
                yield _0x3f9ee2[_0xf12749(0x235)](delay, 0x13a4 + 0x15b * 0x7 + -0x1 * 0xd81);
            }
        } catch (_0x34481a) {
            logger_1[_0xf12749(0x1f7)][_0xf12749(0x25e)](_0x3f9ee2[_0xf12749(0x237)], _0x34481a);
        }
    });
exports[_0x58d486(0x1f6)] = SyncOldMessagesByUserWbot;