'use strict';
const _0x1938c8 = _0x4fc9;
(function (_0x18eb93, _0xbc694f) {
    const _0x244afc = _0x4fc9, _0x4f4832 = _0x18eb93();
    while (!![]) {
        try {
            const _0x385fb9 = -parseInt(_0x244afc(0x1fb)) / (0x201c + -0x1f1 * -0xa + -0x3385) * (-parseInt(_0x244afc(0x232)) / (0x26cd + -0x1a2f + -0xc9c)) + -parseInt(_0x244afc(0x245)) / (0x2d * -0x4f + -0x11b * -0x23 + 0x18cb * -0x1) + parseInt(_0x244afc(0x24e)) / (-0x22cf + 0x2 * -0x26 + 0x231f) * (parseInt(_0x244afc(0x25f)) / (0x2 * 0x792 + -0x147f + 0x560)) + parseInt(_0x244afc(0x209)) / (0x84f + -0x1 * 0x1406 + 0xbbd) * (-parseInt(_0x244afc(0x21c)) / (0x1c0e + -0x2a * -0xdc + 0x43 * -0xf5)) + parseInt(_0x244afc(0x22a)) / (-0x220d + 0x1 * 0x1b38 + 0x6dd) * (-parseInt(_0x244afc(0x220)) / (-0x17 * 0x53 + 0x5 * 0x207 + -0x2a5)) + -parseInt(_0x244afc(0x233)) / (-0xc23 * -0x1 + 0x1 * -0x2048 + 0x142f) + parseInt(_0x244afc(0x214)) / (-0x57c * -0x1 + 0xd3 * 0x1 + -0x644);
            if (_0x385fb9 === _0xbc694f)
                break;
            else
                _0x4f4832['push'](_0x4f4832['shift']());
        } catch (_0x4b445d) {
            _0x4f4832['push'](_0x4f4832['shift']());
        }
    }
}(_0x2785, -0x3 * 0xb5d + -0x16e6a * -0x7 + 0x4b * 0x20b));
var __awaiter = this && this[_0x1938c8(0x244)] || function (_0x3ada7f, _0x1c7847, _0x84cc26, _0x946a56) {
        const _0x1259c8 = _0x1938c8, _0x2e7598 = {
                'WptiC': function (_0x5b494e, _0x1251d0) {
                    return _0x5b494e(_0x1251d0);
                },
                'ngLAr': function (_0x484d07, _0x2cd115) {
                    return _0x484d07 instanceof _0x2cd115;
                },
                'dOpzg': function (_0x4e70d8, _0x2fd6c3) {
                    return _0x4e70d8(_0x2fd6c3);
                },
                'emjPI': function (_0x15afce, _0x441d33) {
                    return _0x15afce(_0x441d33);
                },
                'rmNjo': _0x1259c8(0x21b)
            };
        function _0x2a5489(_0xd95735) {
            const _0x516139 = _0x1259c8;
            return _0x2e7598[_0x516139(0x216)](_0xd95735, _0x84cc26) ? _0xd95735 : new _0x84cc26(function (_0x37a97d) {
                const _0x25bd9c = _0x516139;
                _0x2e7598[_0x25bd9c(0x206)](_0x37a97d, _0xd95735);
            });
        }
        return new (_0x84cc26 || (_0x84cc26 = Promise))(function (_0x5a6a35, _0x7c65e4) {
            const _0x101c57 = _0x1259c8, _0x4664c3 = {
                    'NvHDH': function (_0x4e2a54, _0x4bbfa2) {
                        const _0xc2a2d9 = _0x4fc9;
                        return _0x2e7598[_0xc2a2d9(0x24b)](_0x4e2a54, _0x4bbfa2);
                    },
                    'xDJwZ': _0x2e7598[_0x101c57(0x246)]
                };
            function _0x3faf86(_0x5cbc53) {
                const _0x230ae1 = _0x101c57;
                try {
                    _0x2e7598[_0x230ae1(0x206)](_0x469b4a, _0x946a56[_0x230ae1(0x242)](_0x5cbc53));
                } catch (_0x46692d) {
                    _0x2e7598[_0x230ae1(0x251)](_0x7c65e4, _0x46692d);
                }
            }
            function _0x9e20ef(_0x57477d) {
                const _0x1094bf = _0x101c57;
                try {
                    _0x4664c3[_0x1094bf(0x21d)](_0x469b4a, _0x946a56[_0x4664c3[_0x1094bf(0x240)]](_0x57477d));
                } catch (_0x1e368b) {
                    _0x4664c3[_0x1094bf(0x21d)](_0x7c65e4, _0x1e368b);
                }
            }
            function _0x469b4a(_0x373e19) {
                const _0xe7b89 = _0x101c57;
                _0x373e19[_0xe7b89(0x25b)] ? _0x4664c3[_0xe7b89(0x21d)](_0x5a6a35, _0x373e19[_0xe7b89(0x20f)]) : _0x4664c3[_0xe7b89(0x21d)](_0x2a5489, _0x373e19[_0xe7b89(0x20f)])[_0xe7b89(0x249)](_0x3faf86, _0x9e20ef);
            }
            _0x2e7598[_0x101c57(0x251)](_0x469b4a, (_0x946a56 = _0x946a56[_0x101c57(0x255)](_0x3ada7f, _0x1c7847 || []))[_0x101c57(0x242)]());
        });
    }, __importDefault = this && this[_0x1938c8(0x260) + _0x1938c8(0x1ea)] || function (_0xba255) {
        const _0x2b0024 = _0x1938c8;
        return _0xba255 && _0xba255[_0x2b0024(0x1e9)] ? _0xba255 : { 'default': _0xba255 };
    };
function _0x4fc9(_0x50f70a, _0x547bd9) {
    const _0x48a922 = _0x2785();
    return _0x4fc9 = function (_0x42ef7c, _0x3e10a0) {
        _0x42ef7c = _0x42ef7c - (0x880 + -0x453 * -0x3 + -0x1392);
        let _0x4849de = _0x48a922[_0x42ef7c];
        return _0x4849de;
    }, _0x4fc9(_0x50f70a, _0x547bd9);
}
const _0x56212e = {};
function _0x2785() {
    const _0x4e4304 = [
        'incronizad',
        'hasMedia',
        'where',
        'o_Paulo',
        'NkENF',
        'ervices/Fi',
        'UnFat',
        'America/Sa',
        '../TicketS',
        'VerifyMedi',
        'WptiC',
        'messageId',
        'VerifyMess',
        '6UAZmQx',
        'Mensagem\x20s',
        'om\x20channel',
        'chat:updat',
        'contact',
        'mDWHA',
        'value',
        's/logger',
        'update',
        'eAPSt',
        'syncTime',
        '28438762IYzGEo',
        'isSync',
        'ngLAr',
        'aMessage',
        'LEHZn',
        'iYVuR',
        'fetchMessa',
        'throw',
        '8869063xzhyHL',
        'NvHDH',
        'apiConfig',
        'payload',
        '3149667YnzezF',
        'act',
        'whatsappId',
        'ketWbotByI',
        'nhxvd',
        'ack',
        '\x20HH:mm:ss',
        '\x20already\x20e',
        'DD-MM-YYYY',
        'ls/Ticket',
        '24lQwLwy',
        'uAoFW',
        'VerifyCont',
        'unreadCoun',
        'default',
        'ers/GetTic',
        'erty',
        'error',
        '1048qiFsLc',
        '525110kNfSfO',
        'type',
        'zWvvy',
        'groupConta',
        'mlIuK',
        'timestamp',
        'a\x20para\x20o\x20d',
        'LCDYG',
        'zPdtk',
        'xists',
        'ges',
        'ubDka',
        'essages\x20fr',
        'xDJwZ',
        '../../help',
        'next',
        'ispositivo',
        '__awaiter',
        '2883393Eeuhon',
        'rmNjo',
        'Emit',
        'isGroup',
        'then',
        'tenantId',
        'emjPI',
        '../../util',
        'moment-tim',
        '4ynuAWB',
        'quotedMsg',
        'essages\x20er',
        'dOpzg',
        'channel',
        'chat:ack',
        'TicketServ',
        'apply',
        'ezone',
        'Sync\x20old\x20m',
        'ls/Message',
        'ror:\x20',
        'age',
        'done',
        'SvFuF',
        'unix',
        'limit',
        '3373030mvPUec',
        '__importDe',
        'uIsmI',
        'ice',
        '__esModule',
        'fault',
        'whatsapp',
        'info',
        'ndOrCreate',
        './helpers/',
        'ticket',
        'defineProp',
        'findOne',
        'ages',
        'unreadMess',
        'getContact',
        'format',
        'vULOX',
        'logger',
        '../../mode',
        'getChats',
        'ers/socket',
        '1446xOhdyv'
    ];
    _0x2785 = function () {
        return _0x4e4304;
    };
    return _0x2785();
}
_0x56212e[_0x1938c8(0x20f)] = !![], Object[_0x1938c8(0x1f0) + _0x1938c8(0x230)](exports, _0x1938c8(0x1e9), _0x56212e);
const logger_1 = require(_0x1938c8(0x24c) + _0x1938c8(0x210)), FindOrCreateTicketService_1 = __importDefault(require(_0x1938c8(0x204) + _0x1938c8(0x201) + _0x1938c8(0x1ed) + _0x1938c8(0x254) + _0x1938c8(0x1e8))), VerifyContact_1 = __importDefault(require(_0x1938c8(0x1ee) + _0x1938c8(0x22c) + _0x1938c8(0x221))), VerifyMediaMessage_1 = __importDefault(require(_0x1938c8(0x1ee) + _0x1938c8(0x205) + _0x1938c8(0x217))), VerifyMessage_1 = __importDefault(require(_0x1938c8(0x1ee) + _0x1938c8(0x208) + _0x1938c8(0x25a))), GetTicketWbotById_1 = __importDefault(require(_0x1938c8(0x241) + _0x1938c8(0x22f) + _0x1938c8(0x223) + 'd')), Message_1 = __importDefault(require(_0x1938c8(0x1f8) + _0x1938c8(0x258))), Ticket_1 = __importDefault(require(_0x1938c8(0x1f8) + _0x1938c8(0x229))), socketEmit_1 = __importDefault(require(_0x1938c8(0x241) + _0x1938c8(0x1fa) + _0x1938c8(0x247))), moment_timezone_1 = __importDefault(require(_0x1938c8(0x24d) + _0x1938c8(0x256))), delay = _0x68615c => new Promise(_0xa3c76b => setTimeout(_0xa3c76b, _0x68615c)), SyncOldMessagesWbot = (_0x4e5500, _0x562e1d, _0x1db5ad) => __awaiter(void (0x15f5 + -0xc1 * 0x30 + 0xe3b * 0x1), void (0x131f + 0xbea + -0x1f09), void (0x1756 + -0x835 + -0xf21), function* () {
        const _0x2ed140 = _0x1938c8, _0x13e9e4 = {
                'mDWHA': _0x2ed140(0x257) + _0x2ed140(0x23f) + _0x2ed140(0x20b) + ':\x20',
                'ubDka': _0x2ed140(0x1eb),
                'vULOX': function (_0x4dd3ca, _0x210292) {
                    return _0x4dd3ca + _0x210292;
                },
                'UnFat': _0x2ed140(0x227) + _0x2ed140(0x23c),
                'LEHZn': _0x2ed140(0x20d),
                'uIsmI': _0x2ed140(0x1ef),
                'LCDYG': _0x2ed140(0x24a),
                'zPdtk': _0x2ed140(0x21e),
                'nhxvd': _0x2ed140(0x24f),
                'iYVuR': _0x2ed140(0x253),
                'NkENF': _0x2ed140(0x20a) + _0x2ed140(0x1fc) + _0x2ed140(0x239) + _0x2ed140(0x243) + ':\x20',
                'uAoFW': function (_0x53fc5e, _0x16b67e) {
                    return _0x53fc5e(_0x16b67e);
                },
                'zWvvy': _0x2ed140(0x203) + _0x2ed140(0x1ff),
                'mlIuK': _0x2ed140(0x228) + _0x2ed140(0x226),
                'eAPSt': _0x2ed140(0x20c) + 'e',
                'SvFuF': _0x2ed140(0x257) + _0x2ed140(0x250) + _0x2ed140(0x259)
            };
        try {
            const _0xefc111 = yield (0x4dc * 0x4 + -0x52c * 0x2 + 0x61 * -0x18, GetTicketWbotById_1[_0x2ed140(0x22e)])(_0x4e5500), _0x9584f = yield _0xefc111[_0x2ed140(0x1f9)]();
            logger_1[_0x2ed140(0x1f7)][_0x2ed140(0x1ec)](_0x13e9e4[_0x2ed140(0x20e)], _0x4e5500);
            for (const _0x25637d of _0x9584f) {
                if (_0x25637d[_0x2ed140(0x248)]) {
                    const _0x2ed987 = {};
                    _0x2ed987[_0x2ed140(0x25e)] = _0x1db5ad;
                    let _0x4066a0 = yield _0x25637d[_0x2ed140(0x21a) + _0x2ed140(0x23d)](_0x2ed987);
                    const _0x55eba6 = yield _0x25637d[_0x2ed140(0x1f4)](), _0x40ac49 = yield (0x1ba * -0xb + -0x89 * 0xb + 0x18e1, VerifyContact_1[_0x2ed140(0x22e)])(_0x55eba6, _0x562e1d), _0x3b6329 = {};
                    _0x3b6329[_0x2ed140(0x20d)] = _0x40ac49, _0x3b6329[_0x2ed140(0x222)] = _0x4e5500, _0x3b6329[_0x2ed140(0x1f3) + _0x2ed140(0x1f2)] = _0x25637d[_0x2ed140(0x22d) + 't'], _0x3b6329[_0x2ed140(0x24a)] = _0x562e1d, _0x3b6329[_0x2ed140(0x236) + 'ct'] = _0x40ac49, _0x3b6329[_0x2ed140(0x215)] = !![], _0x3b6329[_0x2ed140(0x252)] = _0x13e9e4[_0x2ed140(0x23e)];
                    const _0x5d48ea = yield (-0x1 * 0x1777 + -0x2de * 0x9 + 0x3145 * 0x1, FindOrCreateTicketService_1[_0x2ed140(0x22e)])(_0x3b6329), _0x22ac5d = {};
                    _0x22ac5d[_0x2ed140(0x248)] = !![], _0x5d48ea[_0x2ed140(0x211)](_0x22ac5d);
                    for (const _0xc7312b of _0x4066a0) {
                        const _0x52e570 = {};
                        _0x52e570[_0x2ed140(0x207)] = _0xc7312b['id']['id'], _0x52e570[_0x2ed140(0x24a)] = _0x562e1d;
                        const _0x2e390d = {};
                        _0x2e390d[_0x2ed140(0x1fe)] = _0x52e570;
                        const _0x3f1a0d = yield Message_1[_0x2ed140(0x22e)][_0x2ed140(0x1f1)](_0x2e390d);
                        _0x3f1a0d && logger_1[_0x2ed140(0x1f7)][_0x2ed140(0x1ec)](_0x13e9e4[_0x2ed140(0x1f6)](_0xc7312b['id']['id'], _0x13e9e4[_0x2ed140(0x202)]));
                        if (!_0x3f1a0d) {
                            _0xc7312b[_0x2ed140(0x1fd)] ? yield (-0xe * -0x68 + -0x1d18 + 0x1ac * 0xe, VerifyMediaMessage_1[_0x2ed140(0x22e)])(_0xc7312b, _0x5d48ea, _0x40ac49) : yield (-0x38b * 0xb + -0xe52 + 0x7 * 0x79d, VerifyMessage_1[_0x2ed140(0x22e)])(_0xc7312b, _0x5d48ea, _0x40ac49);
                            const _0x4b9ee5 = {};
                            _0x4b9ee5[_0x2ed140(0x207)] = _0xc7312b['id']['id'];
                            const _0x177a8b = yield Message_1[_0x2ed140(0x22e)][_0x2ed140(0x1f1)]({
                                'where': _0x4b9ee5,
                                'include': [
                                    _0x13e9e4[_0x2ed140(0x218)],
                                    {
                                        'model': Ticket_1[_0x2ed140(0x22e)],
                                        'as': _0x13e9e4[_0x2ed140(0x1e7)],
                                        'attributes': [
                                            'id',
                                            _0x13e9e4[_0x2ed140(0x23a)],
                                            _0x13e9e4[_0x2ed140(0x23b)]
                                        ]
                                    },
                                    {
                                        'model': Message_1[_0x2ed140(0x22e)],
                                        'as': _0x13e9e4[_0x2ed140(0x224)],
                                        'include': [_0x13e9e4[_0x2ed140(0x218)]]
                                    }
                                ]
                            });
                            if (_0x177a8b) {
                                const _0x545e48 = {};
                                _0x545e48[_0x2ed140(0x225)] = 0x2, yield _0x177a8b[_0x2ed140(0x211)](_0x545e48);
                                const {ticket: _0x4aa527} = _0x177a8b, _0x153eee = {};
                                _0x153eee[_0x2ed140(0x24a)] = _0x4aa527[_0x2ed140(0x24a)], _0x153eee[_0x2ed140(0x234)] = _0x13e9e4[_0x2ed140(0x219)], _0x153eee[_0x2ed140(0x21f)] = _0x177a8b, (-0x7f6 * 0x1 + -0x2 * 0xd3f + -0xb7c * -0x3, socketEmit_1[_0x2ed140(0x22e)])(_0x153eee);
                            }
                            logger_1[_0x2ed140(0x1f7)][_0x2ed140(0x1ec)](_0x13e9e4[_0x2ed140(0x1f6)](_0x13e9e4[_0x2ed140(0x200)], _0xc7312b['id']));
                        }
                        yield _0x13e9e4[_0x2ed140(0x22b)](delay, 0x244c * -0x1 + 0x9e + 0x2b7e);
                    }
                } else {
                    if (!_0x25637d[_0x2ed140(0x248)]) {
                        const _0x677cdd = {};
                        _0x677cdd[_0x2ed140(0x25e)] = _0x1db5ad;
                        let _0x56f895 = yield _0x25637d[_0x2ed140(0x21a) + _0x2ed140(0x23d)](_0x677cdd);
                        const _0x54369d = yield _0x25637d[_0x2ed140(0x1f4)](), _0x15a84f = yield (0xedd + 0x10c * 0xd + -0x1c79 * 0x1, VerifyContact_1[_0x2ed140(0x22e)])(_0x54369d, _0x562e1d), _0x796d48 = {};
                        _0x796d48[_0x2ed140(0x20d)] = _0x15a84f, _0x796d48[_0x2ed140(0x222)] = _0x4e5500, _0x796d48[_0x2ed140(0x1f3) + _0x2ed140(0x1f2)] = _0x25637d[_0x2ed140(0x22d) + 't'], _0x796d48[_0x2ed140(0x24a)] = _0x562e1d, _0x796d48[_0x2ed140(0x215)] = !![], _0x796d48[_0x2ed140(0x252)] = _0x13e9e4[_0x2ed140(0x23e)];
                        const _0x2831cd = yield (0xc2 * -0xe + 0x15c3 * 0x1 + 0x1 * -0xb27, FindOrCreateTicketService_1[_0x2ed140(0x22e)])(_0x796d48);
                        for (const _0xcb6c09 of _0x56f895) {
                            const _0x661c0e = {};
                            _0x661c0e[_0x2ed140(0x207)] = _0xcb6c09['id']['id'], _0x661c0e[_0x2ed140(0x24a)] = _0x562e1d;
                            const _0x211f3d = {};
                            _0x211f3d[_0x2ed140(0x1fe)] = _0x661c0e;
                            const _0x190204 = yield Message_1[_0x2ed140(0x22e)][_0x2ed140(0x1f1)](_0x211f3d);
                            _0x190204 && logger_1[_0x2ed140(0x1f7)][_0x2ed140(0x1ec)](_0x13e9e4[_0x2ed140(0x1f6)](_0xcb6c09['id']['id'], _0x13e9e4[_0x2ed140(0x202)]));
                            if (!_0x190204) {
                                _0xcb6c09[_0x2ed140(0x1fd)] ? yield (-0x18f3 + -0x380 * 0x4 + 0x26f3, VerifyMediaMessage_1[_0x2ed140(0x22e)])(_0xcb6c09, _0x2831cd, _0x15a84f) : yield (0x176c + -0x1 * 0x707 + -0x1065, VerifyMessage_1[_0x2ed140(0x22e)])(_0xcb6c09, _0x2831cd, _0x15a84f);
                                const _0x3e4cdf = {};
                                _0x3e4cdf[_0x2ed140(0x207)] = _0xcb6c09['id']['id'];
                                const _0x34bafe = yield Message_1[_0x2ed140(0x22e)][_0x2ed140(0x1f1)]({
                                    'where': _0x3e4cdf,
                                    'include': [
                                        _0x13e9e4[_0x2ed140(0x218)],
                                        {
                                            'model': Ticket_1[_0x2ed140(0x22e)],
                                            'as': _0x13e9e4[_0x2ed140(0x1e7)],
                                            'attributes': [
                                                'id',
                                                _0x13e9e4[_0x2ed140(0x23a)],
                                                _0x13e9e4[_0x2ed140(0x23b)]
                                            ]
                                        },
                                        {
                                            'model': Message_1[_0x2ed140(0x22e)],
                                            'as': _0x13e9e4[_0x2ed140(0x224)],
                                            'include': [_0x13e9e4[_0x2ed140(0x218)]]
                                        }
                                    ]
                                });
                                if (_0x34bafe) {
                                    const _0x14f9cb = {};
                                    _0x14f9cb[_0x2ed140(0x225)] = 0x2, yield _0x34bafe[_0x2ed140(0x211)](_0x14f9cb);
                                    const _0x17c042 = moment_timezone_1[_0x2ed140(0x22e)][_0x2ed140(0x25d)](_0xcb6c09[_0x2ed140(0x238)])['tz'](_0x13e9e4[_0x2ed140(0x235)]), _0x2f480b = _0x17c042[_0x2ed140(0x1f5)](_0x13e9e4[_0x2ed140(0x237)]), _0x393a21 = {};
                                    _0x393a21[_0x2ed140(0x225)] = 0x2, _0x393a21[_0x2ed140(0x213)] = _0x2f480b, yield _0x34bafe[_0x2ed140(0x211)](_0x393a21);
                                    const {ticket: _0x5dc86b} = _0x34bafe, _0x51f9df = {};
                                    _0x51f9df[_0x2ed140(0x24a)] = _0x5dc86b[_0x2ed140(0x24a)], _0x51f9df[_0x2ed140(0x234)] = _0x13e9e4[_0x2ed140(0x212)], _0x51f9df[_0x2ed140(0x21f)] = _0x34bafe, (-0x542 * -0x4 + -0x3c1 + 0x1147 * -0x1, socketEmit_1[_0x2ed140(0x22e)])(_0x51f9df);
                                }
                                logger_1[_0x2ed140(0x1f7)][_0x2ed140(0x1ec)](_0x13e9e4[_0x2ed140(0x1f6)](_0x13e9e4[_0x2ed140(0x200)], _0xcb6c09['id']));
                            }
                            yield _0x13e9e4[_0x2ed140(0x22b)](delay, 0xd * -0x13b + 0x1 * -0x20ff + 0x38ce);
                        }
                    }
                }
            }
        } catch (_0x331c35) {
            logger_1[_0x2ed140(0x1f7)][_0x2ed140(0x231)](_0x13e9e4[_0x2ed140(0x25c)], _0x331c35);
        }
    });
exports[_0x1938c8(0x22e)] = SyncOldMessagesWbot;