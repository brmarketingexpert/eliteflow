'use strict';
const _0x6217a0 = _0x1152;
(function (_0x4032d8, _0x1f452d) {
    const _0x360195 = _0x1152, _0x31017d = _0x4032d8();
    while (!![]) {
        try {
            const _0x2f9076 = -parseInt(_0x360195(0x1b2)) / (0x16a6 + -0xe3a * -0x1 + 0x1 * -0x24df) * (-parseInt(_0x360195(0x1f3)) / (0x2f * -0xa7 + -0x231a + -0x1 * -0x41c5)) + -parseInt(_0x360195(0x1c8)) / (-0xdbe + 0x1b01 * -0x1 + 0x6f * 0x5e) + -parseInt(_0x360195(0x197)) / (-0x7 * -0xf6 + 0x1b * 0xd + -0x815) * (parseInt(_0x360195(0x190)) / (0x1f2 * -0x1 + 0x37 + -0x38 * -0x8)) + parseInt(_0x360195(0x1d1)) / (-0x25a4 + 0x1ac1 + 0x15 * 0x85) * (parseInt(_0x360195(0x1c9)) / (0x19 * -0xf + -0x1b9f + 0x1d1d)) + -parseInt(_0x360195(0x18f)) / (0x2 * -0xba1 + 0x1 * 0x260f + -0xec5) + parseInt(_0x360195(0x1e9)) / (0x1 * 0x2703 + -0x98f + -0x1d6b) * (parseInt(_0x360195(0x1c2)) / (0x71 * -0x1f + 0x61e * 0x1 + 0x79b)) + parseInt(_0x360195(0x1f1)) / (0xc08 * -0x1 + -0x202d + -0x2c4 * -0x10);
            if (_0x2f9076 === _0x1f452d)
                break;
            else
                _0x31017d['push'](_0x31017d['shift']());
        } catch (_0x2bc4cc) {
            _0x31017d['push'](_0x31017d['shift']());
        }
    }
}(_0x24f8, -0x8c3 * 0x23 + -0x8b36 + 0x47ed4));
var __awaiter = this && this[_0x6217a0(0x1da)] || function (_0x29720a, _0x436f0d, _0x29ee82, _0x1073f9) {
        const _0x52adc5 = _0x6217a0, _0x1df399 = {
                'xqxvw': function (_0x293d54, _0x24a50d) {
                    return _0x293d54(_0x24a50d);
                },
                'whdzL': function (_0x11c16d, _0x5e344f) {
                    return _0x11c16d instanceof _0x5e344f;
                },
                'bdMde': _0x52adc5(0x1d4),
                'AbwqO': function (_0x4f7b19, _0x4d80bd) {
                    return _0x4f7b19(_0x4d80bd);
                },
                'BBHtT': function (_0xfacece, _0x1df58a) {
                    return _0xfacece(_0x1df58a);
                }
            };
        function _0x45bc37(_0x3cd96e) {
            const _0x3fa950 = _0x52adc5;
            return _0x1df399[_0x3fa950(0x18c)](_0x3cd96e, _0x29ee82) ? _0x3cd96e : new _0x29ee82(function (_0x42027e) {
                const _0x22e362 = _0x3fa950;
                _0x1df399[_0x22e362(0x1a7)](_0x42027e, _0x3cd96e);
            });
        }
        return new (_0x29ee82 || (_0x29ee82 = Promise))(function (_0x587826, _0xc50518) {
            const _0x59d4cf = _0x52adc5, _0x40b575 = {
                    'lEMzF': function (_0x5cb125, _0x5a31f8) {
                        const _0x4fcaa4 = _0x1152;
                        return _0x1df399[_0x4fcaa4(0x1a7)](_0x5cb125, _0x5a31f8);
                    },
                    'CWSuH': function (_0x31ed80, _0x452509) {
                        const _0x1838cf = _0x1152;
                        return _0x1df399[_0x1838cf(0x1a7)](_0x31ed80, _0x452509);
                    }
                };
            function _0x31cf5b(_0x34acf6) {
                const _0x2d74b9 = _0x1152;
                try {
                    _0x40b575[_0x2d74b9(0x1a3)](_0x5a3efb, _0x1073f9[_0x2d74b9(0x178)](_0x34acf6));
                } catch (_0x33630f) {
                    _0x40b575[_0x2d74b9(0x1a3)](_0xc50518, _0x33630f);
                }
            }
            function _0xbb0545(_0x2ffd5e) {
                const _0x305230 = _0x1152;
                try {
                    _0x1df399[_0x305230(0x1a7)](_0x5a3efb, _0x1073f9[_0x1df399[_0x305230(0x1ac)]](_0x2ffd5e));
                } catch (_0xe7163d) {
                    _0x1df399[_0x305230(0x1b1)](_0xc50518, _0xe7163d);
                }
            }
            function _0x5a3efb(_0x20dbab) {
                const _0x4079d1 = _0x1152;
                _0x20dbab[_0x4079d1(0x1aa)] ? _0x40b575[_0x4079d1(0x1a3)](_0x587826, _0x20dbab[_0x4079d1(0x1b4)]) : _0x40b575[_0x4079d1(0x1b5)](_0x45bc37, _0x20dbab[_0x4079d1(0x1b4)])[_0x4079d1(0x17c)](_0x31cf5b, _0xbb0545);
            }
            _0x1df399[_0x59d4cf(0x192)](_0x5a3efb, (_0x1073f9 = _0x1073f9[_0x59d4cf(0x184)](_0x29720a, _0x436f0d || []))[_0x59d4cf(0x178)]());
        });
    }, __importDefault = this && this[_0x6217a0(0x1ad) + _0x6217a0(0x19d)] || function (_0x21e14e) {
        const _0x24f05d = _0x6217a0;
        return _0x21e14e && _0x21e14e[_0x24f05d(0x186)] ? _0x21e14e : { 'default': _0x21e14e };
    };
const _0x2a7dd0 = {};
_0x2a7dd0[_0x6217a0(0x1b4)] = !![], Object[_0x6217a0(0x1cc) + _0x6217a0(0x1b9)](exports, _0x6217a0(0x186), _0x2a7dd0);
function _0x24f8() {
    const _0x5caf00 = [
        'date\x20ok',
        'Message\x20Up',
        'sendDocume',
        'xqxvw',
        'sAsRead',
        'date',
        'done',
        'audio',
        'bdMde',
        '__importDe',
        'timestamp',
        'SNPHC',
        'NjxcO',
        'AbwqO',
        '1Gbvabi',
        'zEzoQ',
        'value',
        'CWSuH',
        'EolxL',
        'public',
        'message_id',
        'erty',
        'mediaName',
        'closed',
        'e\x20media',
        'assign',
        'JneYV',
        'lte',
        ')::\x20',
        'logger',
        '4480PrjKuL',
        'ketMessage',
        'Error\x20mess',
        'Error\x20send',
        'sendPhoto',
        'sended',
        '771711EhGHOT',
        '143731SYRBOD',
        'contact',
        'IlOSB',
        'defineProp',
        'telegramId',
        'mEPCz',
        '../../util',
        'mediaType',
        '72RDgCQV',
        'text',
        'SOvZk',
        'throw',
        'AXoXt',
        'sendMessag',
        'sequelize',
        's/logger',
        'reply_to_m',
        '__awaiter',
        'dataValues',
        '../../mode',
        'id:\x20',
        'Jwksp',
        'image',
        'ohnhq',
        'ers/socket',
        'pending',
        'quotedMsg',
        'rmDkD',
        'tenantId',
        'WufgX',
        'telegram',
        'ers/SetTic',
        '333bGXJCu',
        '\x20message\x20(',
        'gAMMD',
        'sfZXx',
        'chat:ack',
        'ls/Message',
        'join',
        'ptt',
        '3731684KbfDCa',
        'error',
        '208878EhbFil',
        'THyyV',
        'kJKyK',
        'next',
        '\x20|\x20Ticket:',
        'nant:\x20',
        'path',
        'then',
        'e\x20text',
        'ASC',
        'info',
        'ezbkX',
        'ls/Ticket',
        'sendVideo',
        'messageId',
        'apply',
        'mediaUrl',
        '__esModule',
        'default',
        'where',
        'qIbfp',
        'body',
        'chat',
        'whdzL',
        'Emit',
        'sendVoice',
        '1291672oWdvTx',
        '15sFJsjn',
        'uZXQV',
        'BBHtT',
        'EqTHv',
        'cMCWu',
        'video',
        'SCMly',
        '143320EfxSVy',
        'createdAt',
        'source',
        'findAll',
        'includes',
        '../../help',
        'fault',
        'update',
        'Nznuu',
        'essage_id',
        'age\x20is\x20(te',
        'ticket',
        'lEMzF'
    ];
    _0x24f8 = function () {
        return _0x5caf00;
    };
    return _0x24f8();
}
function _0x1152(_0xe45261, _0x2b9766) {
    const _0x30aa5c = _0x24f8();
    return _0x1152 = function (_0x1098d1, _0x38d58c) {
        _0x1098d1 = _0x1098d1 - (0x8dc + 0x124e + 0x11 * -0x183);
        let _0x562dcd = _0x30aa5c[_0x1098d1];
        return _0x562dcd;
    }, _0x1152(_0xe45261, _0x2b9766);
}
const path_1 = require(_0x6217a0(0x17b)), sequelize_1 = require(_0x6217a0(0x1d7)), SetTicketMessagesAsRead_1 = __importDefault(require(_0x6217a0(0x19c) + _0x6217a0(0x1e8) + _0x6217a0(0x1c3) + _0x6217a0(0x1a8))), socketEmit_1 = __importDefault(require(_0x6217a0(0x19c) + _0x6217a0(0x1e1) + _0x6217a0(0x18d))), Message_1 = __importDefault(require(_0x6217a0(0x1dc) + _0x6217a0(0x1ee))), Ticket_1 = __importDefault(require(_0x6217a0(0x1dc) + _0x6217a0(0x181))), logger_1 = require(_0x6217a0(0x1cf) + _0x6217a0(0x1d8)), SendMessagesSystemWbot = (_0x2c61bd, _0x17ad87) => __awaiter(void (-0x56d * 0x5 + 0x4b2 * 0x6 + -0x3 * 0x59), void (-0x1 * -0x925 + -0xd8a + 0x465), void (0x1408 + 0x7fc + 0x2 * -0xe02), function* () {
        const _0x2cdfa2 = _0x6217a0, _0x18b052 = {};
        _0x18b052[_0x2cdfa2(0x1be)] = _0x2cdfa2(0x1e2), _0x18b052[_0x2cdfa2(0x194)] = _0x2cdfa2(0x1ca), _0x18b052[_0x2cdfa2(0x1f4)] = _0x2cdfa2(0x1a2), _0x18b052[_0x2cdfa2(0x191)] = _0x2cdfa2(0x1bb), _0x18b052[_0x2cdfa2(0x1ec)] = _0x2cdfa2(0x1e7), _0x18b052[_0x2cdfa2(0x1af)] = _0x2cdfa2(0x1e3), _0x18b052[_0x2cdfa2(0x193)] = _0x2cdfa2(0x198), _0x18b052[_0x2cdfa2(0x1e4)] = _0x2cdfa2(0x17e), _0x18b052[_0x2cdfa2(0x177)] = _0x2cdfa2(0x18b), _0x18b052[_0x2cdfa2(0x19f)] = _0x2cdfa2(0x1d2), _0x18b052[_0x2cdfa2(0x189)] = _0x2cdfa2(0x1b7), _0x18b052[_0x2cdfa2(0x1e0)] = function (_0x245a60, _0x2f7b2b) {
            return _0x245a60 === _0x2f7b2b;
        }, _0x18b052[_0x2cdfa2(0x1de)] = _0x2cdfa2(0x1ab), _0x18b052[_0x2cdfa2(0x1e6)] = function (_0x4be155, _0x5cb9ef) {
            return _0x4be155 === _0x5cb9ef;
        }, _0x18b052[_0x2cdfa2(0x1eb)] = _0x2cdfa2(0x1f0), _0x18b052[_0x2cdfa2(0x1d5)] = function (_0x5f1378, _0x2d2a6a) {
            return _0x5f1378 === _0x2d2a6a;
        }, _0x18b052[_0x2cdfa2(0x180)] = _0x2cdfa2(0x1df), _0x18b052[_0x2cdfa2(0x1d3)] = _0x2cdfa2(0x195), _0x18b052[_0x2cdfa2(0x1cb)] = _0x2cdfa2(0x1d6) + _0x2cdfa2(0x1bc), _0x18b052[_0x2cdfa2(0x1b3)] = _0x2cdfa2(0x1d6) + _0x2cdfa2(0x17d), _0x18b052[_0x2cdfa2(0x196)] = function (_0x512ad2, _0x1b03c1) {
            return _0x512ad2 * _0x1b03c1;
        }, _0x18b052[_0x2cdfa2(0x1b6)] = _0x2cdfa2(0x1c7), _0x18b052[_0x2cdfa2(0x1ce)] = _0x2cdfa2(0x1ed), _0x18b052[_0x2cdfa2(0x1b0)] = _0x2cdfa2(0x1a5) + _0x2cdfa2(0x1a4);
        const _0x41261a = _0x18b052, _0x24c289 = { [sequelize_1['Op']['is']]: null }, _0x250766 = {
                'fromMe': !![],
                'messageId': _0x24c289,
                'status': _0x41261a[_0x2cdfa2(0x1be)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][_0x2cdfa2(0x1bf)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, _0xb6859e = yield Message_1[_0x2cdfa2(0x187)][_0x2cdfa2(0x19a)]({
                'where': _0x250766,
                'include': [
                    _0x41261a[_0x2cdfa2(0x194)],
                    {
                        'model': Ticket_1[_0x2cdfa2(0x187)],
                        'as': _0x41261a[_0x2cdfa2(0x1f4)],
                        'where': {
                            'tenantId': _0x17ad87,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: _0x41261a[_0x2cdfa2(0x191)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': _0x41261a[_0x2cdfa2(0x1ec)],
                            'whatsappId': _0x2c61bd['id']
                        },
                        'include': [_0x41261a[_0x2cdfa2(0x194)]]
                    },
                    {
                        'model': Message_1[_0x2cdfa2(0x187)],
                        'as': _0x41261a[_0x2cdfa2(0x1af)],
                        'include': [_0x41261a[_0x2cdfa2(0x194)]]
                    }
                ],
                'order': [[
                        _0x41261a[_0x2cdfa2(0x193)],
                        _0x41261a[_0x2cdfa2(0x1e4)]
                    ]]
            });
        let _0x46b0ee;
        for (const _0x1b6351 of _0xb6859e) {
            const _0xf776d7 = _0x1b6351, {ticket: _0x37baad} = _0xf776d7, _0x54378a = _0x37baad[_0x2cdfa2(0x1ca)][_0x2cdfa2(0x1cd)], _0x39927d = {};
            _0xf776d7[_0x2cdfa2(0x1e3)] && (_0x39927d[_0x2cdfa2(0x1d9) + _0x2cdfa2(0x1a0)] = _0xf776d7[_0x2cdfa2(0x1e3)][_0x2cdfa2(0x183)]);
            try {
                if (![
                        _0x41261a[_0x2cdfa2(0x177)],
                        _0x41261a[_0x2cdfa2(0x19f)]
                    ][_0x2cdfa2(0x19b)](_0xf776d7[_0x2cdfa2(0x1d0)]) && _0xf776d7[_0x2cdfa2(0x1ba)]) {
                    const _0x2e3bb1 = (0x1 * -0x1267 + 0x1bfa * -0x1 + -0x17f * -0x1f, path_1[_0x2cdfa2(0x1ef)])(__dirname, '..', '..', '..', _0x41261a[_0x2cdfa2(0x189)]), _0x2b09b8 = (-0xcef * -0x1 + -0x73e + -0x5b1, path_1[_0x2cdfa2(0x1ef)])(_0x2e3bb1, _0xf776d7[_0x2cdfa2(0x1ba)]);
                    if (_0x41261a[_0x2cdfa2(0x1e0)](_0xf776d7[_0x2cdfa2(0x1d0)], _0x41261a[_0x2cdfa2(0x1de)]) || _0x41261a[_0x2cdfa2(0x1e6)](_0xf776d7[_0x2cdfa2(0x1d0)], _0x41261a[_0x2cdfa2(0x1eb)])) {
                        const _0x34d741 = {};
                        _0x34d741[_0x2cdfa2(0x199)] = _0x2b09b8, _0x46b0ee = yield _0x2c61bd[_0x2cdfa2(0x1e7)][_0x2cdfa2(0x18e)](_0x54378a, _0x34d741, _0x39927d);
                    } else {
                        if (_0x41261a[_0x2cdfa2(0x1d5)](_0xf776d7[_0x2cdfa2(0x1d0)], _0x41261a[_0x2cdfa2(0x180)])) {
                            const _0x4a4e16 = {};
                            _0x4a4e16[_0x2cdfa2(0x199)] = _0x2b09b8, _0x46b0ee = yield _0x2c61bd[_0x2cdfa2(0x1e7)][_0x2cdfa2(0x1c6)](_0x54378a, _0x4a4e16, _0x39927d);
                        } else {
                            if (_0x41261a[_0x2cdfa2(0x1d5)](_0xf776d7[_0x2cdfa2(0x1d0)], _0x41261a[_0x2cdfa2(0x1d3)])) {
                                const _0x1fc3a2 = {};
                                _0x1fc3a2[_0x2cdfa2(0x199)] = _0x2b09b8, _0x46b0ee = yield _0x2c61bd[_0x2cdfa2(0x1e7)][_0x2cdfa2(0x182)](_0x54378a, _0x1fc3a2, _0x39927d);
                            } else {
                                const _0x28d78b = {};
                                _0x28d78b[_0x2cdfa2(0x199)] = _0x2b09b8, _0x46b0ee = yield _0x2c61bd[_0x2cdfa2(0x1e7)][_0x2cdfa2(0x1a6) + 'nt'](_0x54378a, _0x28d78b, _0x39927d);
                            }
                        }
                    }
                    logger_1[_0x2cdfa2(0x1c1)][_0x2cdfa2(0x17f)](_0x41261a[_0x2cdfa2(0x1cb)]);
                } else
                    _0x46b0ee = yield _0x2c61bd[_0x2cdfa2(0x1e7)][_0x2cdfa2(0x1d6) + 'e'](_0x54378a, _0xf776d7[_0x2cdfa2(0x18a)], _0x39927d), logger_1[_0x2cdfa2(0x1c1)][_0x2cdfa2(0x17f)](_0x41261a[_0x2cdfa2(0x1b3)]);
                const _0x47d3a6 = Object[_0x2cdfa2(0x1bd)](Object[_0x2cdfa2(0x1bd)](Object[_0x2cdfa2(0x1bd)]({}, _0xf776d7), _0x46b0ee), {
                        'id': _0xf776d7['id'],
                        'timestamp': _0x41261a[_0x2cdfa2(0x196)](_0x46b0ee[_0x2cdfa2(0x1a9)], 0x21 * -0x13 + -0x1c9 * 0x2 + 0x9ed * 0x1),
                        'messageId': _0x46b0ee[_0x2cdfa2(0x1b8)],
                        'status': _0x41261a[_0x2cdfa2(0x1b6)],
                        'ack': 0x2
                    }), _0x5251dd = {};
                _0x5251dd['id'] = _0xf776d7['id'];
                const _0x5389d0 = {};
                _0x5389d0[_0x2cdfa2(0x188)] = _0x5251dd, yield Message_1[_0x2cdfa2(0x187)][_0x2cdfa2(0x19e)](Object[_0x2cdfa2(0x1bd)]({}, _0x47d3a6), _0x5389d0), (0x51 * 0x6b + -0x1722 + -0xab9, socketEmit_1[_0x2cdfa2(0x187)])({
                    'tenantId': _0x37baad[_0x2cdfa2(0x1e5)],
                    'type': _0x41261a[_0x2cdfa2(0x1ce)],
                    'payload': Object[_0x2cdfa2(0x1bd)](Object[_0x2cdfa2(0x1bd)]({}, _0xf776d7[_0x2cdfa2(0x1db)]), {
                        'id': _0xf776d7['id'],
                        'mediaUrl': _0xf776d7[_0x2cdfa2(0x185)],
                        'timestamp': _0x47d3a6[_0x2cdfa2(0x1ae)],
                        'messageId': _0x46b0ee[_0x2cdfa2(0x1b8)],
                        'status': _0x41261a[_0x2cdfa2(0x1b6)],
                        'ack': 0x2
                    })
                }), logger_1[_0x2cdfa2(0x1c1)][_0x2cdfa2(0x17f)](_0x41261a[_0x2cdfa2(0x1b0)]), yield (0x127e + 0x2 * -0x109c + -0x1 * -0xeba, SetTicketMessagesAsRead_1[_0x2cdfa2(0x187)])(_0x37baad);
            } catch (_0x22f383) {
                const _0x17e3ac = _0xf776d7['id'], _0x1f21bc = _0xf776d7[_0x2cdfa2(0x1a2)]['id'];
                logger_1[_0x2cdfa2(0x1c1)][_0x2cdfa2(0x1f2)](_0x2cdfa2(0x1c4) + _0x2cdfa2(0x1a1) + _0x2cdfa2(0x17a) + _0x17ad87 + (_0x2cdfa2(0x179) + '\x20') + _0x1f21bc + ')'), logger_1[_0x2cdfa2(0x1c1)][_0x2cdfa2(0x1f2)](_0x2cdfa2(0x1c5) + _0x2cdfa2(0x1ea) + _0x2cdfa2(0x1dd) + _0x17e3ac + _0x2cdfa2(0x1c0) + _0x22f383);
            }
        }
    });
exports[_0x6217a0(0x187)] = SendMessagesSystemWbot;