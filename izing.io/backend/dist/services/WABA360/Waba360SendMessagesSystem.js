'use strict';
const _0xdf423a = _0x8ce5;
function _0x2678() {
    const _0x14f14b = [
        'vKpoi',
        'status',
        'apiKey',
        'mrHCN',
        '3214701gZiJaP',
        'jrNbZ',
        'ASC',
        'ack',
        'ghZca',
        'update',
        'BSLNq',
        '404YlbIlm',
        '360',
        'ketMessage',
        'ls/Whatsap',
        'voice',
        'eaoWl',
        'YDPsc',
        'then',
        'FFCWx',
        'lmKyP',
        'fbTDs',
        '35075wnwOmQ',
        'assign',
        'LqIYK',
        'lGiJB',
        'VBPHm',
        'pending',
        'jbPbD',
        '../../mode',
        'tenantId',
        'dataValues',
        'text',
        '../../util',
        'Emit',
        'rwRDY',
        'erty',
        'ls/Ticket',
        'lte',
        'default',
        'mediaName',
        'document',
        'MplQI',
        'quotedMsg',
        'caption',
        'throw',
        'ticket',
        'CrPeK',
        '../../help',
        'applicatio',
        'type',
        'number',
        'WRGEE',
        '9785152VjWccx',
        'timestamp',
        'pEFzU',
        'JdjHh',
        'messageId',
        'WYiQB',
        'contact',
        'value',
        'done',
        'sequelize',
        'ixAkK',
        'findAll',
        'age',
        'ers/socket',
        './SentMess',
        'IXcTw',
        'chat:ack',
        'createdAt',
        'image',
        'JQsYn',
        'anHJF',
        '1025362mSpejQ',
        'Unbsk',
        '38866kZaBsf',
        'next',
        'fault',
        'hjOEv',
        'ZetHS',
        'logger',
        'messages',
        'date\x20ok',
        'xwlvJ',
        'waba',
        'ls/Message',
        'Amxkx',
        'body',
        'KJokm',
        'wabaMediaI',
        '__esModule',
        'tokenAPI',
        '4531734XHhMTp',
        '474156xYjeuC',
        'DbFHJ',
        's/logger',
        '__awaiter',
        'includes',
        'sended',
        'chat',
        '57YEZloY',
        'info',
        'sAsRead',
        'ZvMMX',
        'Message\x20Up',
        'whatsapp',
        '__importDe',
        'glEWD',
        'ers/SetTic',
        'mediaUrl',
        'message',
        'tWaKv',
        'hJYir',
        'video',
        'where',
        'apply',
        'FFuMO',
        'individual',
        'mediaType',
        'defineProp',
        'audio',
        'SiqPz'
    ];
    _0x2678 = function () {
        return _0x14f14b;
    };
    return _0x2678();
}
(function (_0x28edd0, _0xa5eb16) {
    const _0x447704 = _0x8ce5, _0x3c9125 = _0x28edd0();
    while (!![]) {
        try {
            const _0x4f4d3f = parseInt(_0x447704(0x23a)) / (0x10f * 0x5 + -0x95 * 0x10 + 0x406) + parseInt(_0x447704(0x23c)) / (-0x26f5 + -0x5b * 0x35 + 0x31 * 0x12e) * (parseInt(_0x447704(0x1da)) / (-0x4 * -0x32e + 0x4 * -0x19b + -0x649)) + parseInt(_0x447704(0x1fb)) / (-0x14f2 + 0x7 * 0x2c3 + 0x8b * 0x3) * (parseInt(_0x447704(0x206)) / (-0x8cc * 0x1 + 0x19 * 0xf3 + -0x17 * 0xa6)) + -parseInt(_0x447704(0x1d3)) / (-0x1 * 0x73d + -0x2411 + 0x2b54) + parseInt(_0x447704(0x1f4)) / (0x101c * -0x1 + 0x1 * 0x3a3 + 0xc80) + -parseInt(_0x447704(0x225)) / (0x1dac + -0x2 * 0x4e1 + -0x13e2 * 0x1) + -parseInt(_0x447704(0x1d2)) / (0x17 * 0xf1 + -0x1247 + 0x2d * -0x13);
            if (_0x4f4d3f === _0xa5eb16)
                break;
            else
                _0x3c9125['push'](_0x3c9125['shift']());
        } catch (_0x22932b) {
            _0x3c9125['push'](_0x3c9125['shift']());
        }
    }
}(_0x2678, -0xb23 * 0xb5 + 0x16da30 + -0x1b763 * 0x2));
function _0x8ce5(_0x3ab4e3, _0x5e8dd1) {
    const _0x38a47a = _0x2678();
    return _0x8ce5 = function (_0x1ad370, _0x4ec7e7) {
        _0x1ad370 = _0x1ad370 - (-0x1612 + -0x455 + -0x1 * -0x1c2d);
        let _0x14ce38 = _0x38a47a[_0x1ad370];
        return _0x14ce38;
    }, _0x8ce5(_0x3ab4e3, _0x5e8dd1);
}
var __awaiter = this && this[_0xdf423a(0x1d6)] || function (_0x5ca2dc, _0xbea6ab, _0x556e52, _0x3719d0) {
        const _0x5c8530 = _0xdf423a, _0x12fe7d = {
                'ZvMMX': function (_0x22cbd8, _0xf90929) {
                    return _0x22cbd8(_0xf90929);
                },
                'hJYir': function (_0x16fb52, _0x1d6678) {
                    return _0x16fb52 instanceof _0x1d6678;
                },
                'FFuMO': function (_0x39cc09, _0x4dc7e3) {
                    return _0x39cc09(_0x4dc7e3);
                },
                'ghZca': _0x5c8530(0x21d),
                'KJokm': function (_0x153b33, _0xca1671) {
                    return _0x153b33(_0xca1671);
                },
                'anHJF': function (_0xeae394, _0x4e53b3) {
                    return _0xeae394(_0x4e53b3);
                }
            };
        function _0x21d7e4(_0x2b5b7e) {
            const _0x56867f = _0x5c8530, _0x5e2654 = {
                    'jbPbD': function (_0x4e5ea7, _0x754f96) {
                        const _0x1ebd7b = _0x8ce5;
                        return _0x12fe7d[_0x1ebd7b(0x1dd)](_0x4e5ea7, _0x754f96);
                    }
                };
            return _0x12fe7d[_0x56867f(0x1e6)](_0x2b5b7e, _0x556e52) ? _0x2b5b7e : new _0x556e52(function (_0x213f93) {
                const _0x1f5f73 = _0x56867f;
                _0x5e2654[_0x1f5f73(0x20c)](_0x213f93, _0x2b5b7e);
            });
        }
        return new (_0x556e52 || (_0x556e52 = Promise))(function (_0x3015d2, _0xe7ccb7) {
            const _0x27321d = _0x5c8530, _0x1cc21e = {
                    'IXcTw': function (_0x2816a0, _0x2a255c) {
                        const _0x4f6dad = _0x8ce5;
                        return _0x12fe7d[_0x4f6dad(0x1ea)](_0x2816a0, _0x2a255c);
                    },
                    'FFCWx': function (_0x5aa470, _0x2615d7) {
                        const _0x1fc56b = _0x8ce5;
                        return _0x12fe7d[_0x1fc56b(0x1ce)](_0x5aa470, _0x2615d7);
                    },
                    'xwlvJ': function (_0x2836de, _0x4380e6) {
                        const _0xd6d6c6 = _0x8ce5;
                        return _0x12fe7d[_0xd6d6c6(0x1ea)](_0x2836de, _0x4380e6);
                    }
                };
            function _0x3d5776(_0x3c0195) {
                const _0x33a7c7 = _0x8ce5;
                try {
                    _0x1cc21e[_0x33a7c7(0x234)](_0x19ceb5, _0x3719d0[_0x33a7c7(0x23d)](_0x3c0195));
                } catch (_0x5b7ef2) {
                    _0x1cc21e[_0x33a7c7(0x234)](_0xe7ccb7, _0x5b7ef2);
                }
            }
            function _0x15157c(_0x113416) {
                const _0x6d2804 = _0x8ce5;
                try {
                    _0x12fe7d[_0x6d2804(0x1ea)](_0x19ceb5, _0x3719d0[_0x12fe7d[_0x6d2804(0x1f8)]](_0x113416));
                } catch (_0x281051) {
                    _0x12fe7d[_0x6d2804(0x1dd)](_0xe7ccb7, _0x281051);
                }
            }
            function _0x19ceb5(_0x122bd3) {
                const _0x2277d0 = _0x8ce5;
                _0x122bd3[_0x2277d0(0x22d)] ? _0x1cc21e[_0x2277d0(0x203)](_0x3015d2, _0x122bd3[_0x2277d0(0x22c)]) : _0x1cc21e[_0x2277d0(0x1c9)](_0x21d7e4, _0x122bd3[_0x2277d0(0x22c)])[_0x2277d0(0x202)](_0x3d5776, _0x15157c);
            }
            _0x12fe7d[_0x27321d(0x239)](_0x19ceb5, (_0x3719d0 = _0x3719d0[_0x27321d(0x1e9)](_0x5ca2dc, _0xbea6ab || []))[_0x27321d(0x23d)]());
        });
    }, __importDefault = this && this[_0xdf423a(0x1e0) + _0xdf423a(0x23e)] || function (_0x4740eb) {
        const _0x5e43d8 = _0xdf423a;
        return _0x4740eb && _0x4740eb[_0x5e43d8(0x1d0)] ? _0x4740eb : { 'default': _0x4740eb };
    };
const _0xb5d576 = {};
_0xb5d576[_0xdf423a(0x22c)] = !![], Object[_0xdf423a(0x1ed) + _0xdf423a(0x214)](exports, _0xdf423a(0x1d0), _0xb5d576);
const sequelize_1 = require(_0xdf423a(0x22e)), SetTicketMessagesAsRead_1 = __importDefault(require(_0xdf423a(0x220) + _0xdf423a(0x1e2) + _0xdf423a(0x1fd) + _0xdf423a(0x1dc))), socketEmit_1 = __importDefault(require(_0xdf423a(0x220) + _0xdf423a(0x232) + _0xdf423a(0x212))), Message_1 = __importDefault(require(_0xdf423a(0x20d) + _0xdf423a(0x1cb))), Ticket_1 = __importDefault(require(_0xdf423a(0x20d) + _0xdf423a(0x215))), Whatsapp_1 = __importDefault(require(_0xdf423a(0x20d) + _0xdf423a(0x1fe) + 'p')), logger_1 = require(_0xdf423a(0x211) + _0xdf423a(0x1d5)), SentMessage_1 = __importDefault(require(_0xdf423a(0x233) + _0xdf423a(0x231))), buildWabaMessage360 = (_0x5cbc4e, _0x10ec24) => __awaiter(void (-0x1 * 0x655 + 0x17c9 * -0x1 + 0x1e1e), void (0x2528 + -0x11 * -0x1eb + -0x45c3), void (0x576 + -0x64 * 0x37 + 0x1006), function* () {
        const _0x25de68 = _0xdf423a, _0x48681c = {
                'JQsYn': function (_0x5e9f54, _0x5917f6) {
                    return _0x5e9f54(_0x5917f6);
                },
                'LqIYK': _0x25de68(0x1eb),
                'Unbsk': _0x25de68(0x210),
                'DbFHJ': function (_0x45d1e5, _0x5eb3bd) {
                    return _0x45d1e5 === _0x5eb3bd;
                },
                'JdjHh': _0x25de68(0x221) + 'n',
                'SiqPz': function (_0x4714ba, _0x5b0d5e) {
                    return _0x4714ba === _0x5b0d5e;
                },
                'rwRDY': _0x25de68(0x219),
                'WYiQB': _0x25de68(0x237),
                'hjOEv': _0x25de68(0x1e7),
                'Amxkx': _0x25de68(0x1ee),
                'tWaKv': _0x25de68(0x1ff),
                'VBPHm': _0x25de68(0x1d9),
                'vKpoi': function (_0x4e618c, _0x1db45a) {
                    return _0x4e618c === _0x1db45a;
                }
            };
        let _0x33ac86 = {
            'timestamp': _0x48681c[_0x25de68(0x238)](String, _0x5cbc4e[_0x25de68(0x226)]),
            'recipient_type': _0x48681c[_0x25de68(0x208)],
            'to': _0x10ec24,
            'type': _0x48681c[_0x25de68(0x23b)]
        };
        if (_0x48681c[_0x25de68(0x1d4)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x228)]) || _0x48681c[_0x25de68(0x1ef)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x213)])) {
            const _0x433e85 = {};
            _0x433e85['id'] = _0x5cbc4e[_0x25de68(0x1cf) + 'd'], _0x433e85[_0x25de68(0x21c)] = _0x5cbc4e[_0x25de68(0x1cd)] || _0x5cbc4e[_0x25de68(0x218)] || '' || '';
            const _0x8bcffe = {};
            _0x8bcffe[_0x25de68(0x222)] = _0x48681c[_0x25de68(0x213)], _0x8bcffe[_0x25de68(0x219)] = _0x433e85, _0x33ac86 = Object[_0x25de68(0x207)](Object[_0x25de68(0x207)]({}, _0x33ac86), _0x8bcffe);
        }
        if (_0x48681c[_0x25de68(0x1ef)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x22a)])) {
            const _0xab0337 = {};
            _0xab0337['id'] = _0x5cbc4e[_0x25de68(0x1cf) + 'd'], _0xab0337[_0x25de68(0x21c)] = _0x5cbc4e[_0x25de68(0x1cd)] || _0x5cbc4e[_0x25de68(0x218)] || '';
            const _0x49937a = {};
            _0x49937a[_0x25de68(0x222)] = _0x48681c[_0x25de68(0x22a)], _0x49937a[_0x25de68(0x237)] = _0xab0337, _0x33ac86 = Object[_0x25de68(0x207)](Object[_0x25de68(0x207)]({}, _0x33ac86), _0x49937a);
        }
        if (_0x48681c[_0x25de68(0x1ef)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x23f)])) {
            const _0x3b0de6 = {};
            _0x3b0de6['id'] = _0x5cbc4e[_0x25de68(0x1cf) + 'd'], _0x3b0de6[_0x25de68(0x21c)] = _0x5cbc4e[_0x25de68(0x1cd)] || _0x5cbc4e[_0x25de68(0x218)] || '';
            const _0x38bae9 = {};
            _0x38bae9[_0x25de68(0x222)] = _0x48681c[_0x25de68(0x23f)], _0x38bae9[_0x25de68(0x1e7)] = _0x3b0de6, _0x33ac86 = Object[_0x25de68(0x207)](Object[_0x25de68(0x207)]({}, _0x33ac86), _0x38bae9);
        }
        if (_0x48681c[_0x25de68(0x1ef)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x1cc)]) || _0x48681c[_0x25de68(0x1d4)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x1e5)])) {
            const _0x51476e = {};
            _0x51476e['id'] = _0x5cbc4e[_0x25de68(0x1cf) + 'd'], _0x51476e[_0x25de68(0x21c)] = _0x5cbc4e[_0x25de68(0x1cd)] || _0x5cbc4e[_0x25de68(0x218)] || '';
            const _0x27042a = {};
            _0x27042a[_0x25de68(0x222)] = _0x48681c[_0x25de68(0x1cc)], _0x27042a[_0x25de68(0x1ee)] = _0x51476e, _0x33ac86 = Object[_0x25de68(0x207)](Object[_0x25de68(0x207)]({}, _0x33ac86), _0x27042a);
        }
        if (_0x48681c[_0x25de68(0x1ef)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x20a)]) || _0x48681c[_0x25de68(0x1f0)](_0x5cbc4e[_0x25de68(0x1ec)], _0x48681c[_0x25de68(0x23b)])) {
            const _0x33d5d1 = {};
            _0x33d5d1[_0x25de68(0x1cd)] = _0x5cbc4e[_0x25de68(0x1cd)];
            const _0x1cbfcb = {};
            _0x1cbfcb[_0x25de68(0x210)] = _0x33d5d1, _0x33ac86 = Object[_0x25de68(0x207)](Object[_0x25de68(0x207)]({}, _0x33ac86), _0x1cbfcb);
        }
        return _0x33ac86;
    }), _0x2c0027 = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': _0x2c0027,
        'status': _0xdf423a(0x20b),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][_0xdf423a(0x216)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = _0x26b5b8 => __awaiter(void (0x2627 * -0x1 + 0x2027 + 0x600), void (0xe66 + -0x2675 + 0x805 * 0x3), void (-0xe89 * -0x2 + -0x1d9 * -0xb + 0x3165 * -0x1), function* () {
        const _0x50e6fa = _0xdf423a, _0x3e5349 = {
                'glEWD': _0x50e6fa(0x22b),
                'ZetHS': _0x50e6fa(0x21e),
                'jrNbZ': _0x50e6fa(0x1ca),
                'MplQI': _0x50e6fa(0x1df),
                'lmKyP': _0x50e6fa(0x1fc),
                'BSLNq': _0x50e6fa(0x21b),
                'WRGEE': _0x50e6fa(0x236),
                'eaoWl': _0x50e6fa(0x1f6),
                'mrHCN': function (_0x56d1f3, _0x3cae00) {
                    return _0x56d1f3(_0x3cae00);
                },
                'pEFzU': _0x50e6fa(0x210),
                'YDPsc': _0x50e6fa(0x1d9),
                'ixAkK': function (_0x30e20f, _0x3d9d9d, _0x438001) {
                    return _0x30e20f(_0x3d9d9d, _0x438001);
                },
                'lGiJB': _0x50e6fa(0x1d8),
                'CrPeK': _0x50e6fa(0x235),
                'fbTDs': _0x50e6fa(0x1de) + _0x50e6fa(0x1c8)
            }, _0x4701c1 = yield Message_1[_0x50e6fa(0x217)][_0x50e6fa(0x230)]({
                'where': where,
                'include': [
                    _0x3e5349[_0x50e6fa(0x1e1)],
                    {
                        'model': Ticket_1[_0x50e6fa(0x217)],
                        'as': _0x3e5349[_0x50e6fa(0x240)],
                        'where': {
                            'tenantId': _0x26b5b8[_0x50e6fa(0x20e)],
                            'channel': _0x3e5349[_0x50e6fa(0x1f5)]
                        },
                        'include': [
                            _0x3e5349[_0x50e6fa(0x1e1)],
                            {
                                'model': Whatsapp_1[_0x50e6fa(0x217)],
                                'as': _0x3e5349[_0x50e6fa(0x21a)],
                                'where': {
                                    'id': _0x26b5b8['id'],
                                    'type': _0x3e5349[_0x50e6fa(0x1f5)],
                                    'wabaBSP': _0x3e5349[_0x50e6fa(0x204)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[_0x50e6fa(0x217)],
                        'as': _0x3e5349[_0x50e6fa(0x1fa)],
                        'include': [_0x3e5349[_0x50e6fa(0x1e1)]]
                    }
                ],
                'order': [[
                        _0x3e5349[_0x50e6fa(0x224)],
                        _0x3e5349[_0x50e6fa(0x200)]
                    ]]
            });
        for (const _0x5e7b48 of _0x4701c1) {
            const {ticket: _0x180aee} = _0x5e7b48, _0x538c29 = _0x3e5349[_0x50e6fa(0x1f3)](String, _0x180aee[_0x50e6fa(0x22b)][_0x50e6fa(0x223)]);
            if (![
                    _0x3e5349[_0x50e6fa(0x227)],
                    _0x3e5349[_0x50e6fa(0x201)]
                ][_0x50e6fa(0x1d7)](_0x5e7b48[_0x50e6fa(0x1ec)]) && _0x5e7b48[_0x50e6fa(0x1e3)] && !_0x5e7b48[_0x50e6fa(0x1cf) + 'd']) {
            }
            const _0x3d9602 = yield _0x3e5349[_0x50e6fa(0x22f)](buildWabaMessage360, _0x5e7b48, _0x538c29), _0x299cd9 = {};
            _0x299cd9[_0x50e6fa(0x1e4)] = _0x3d9602, _0x299cd9[_0x50e6fa(0x1f2)] = _0x26b5b8[_0x50e6fa(0x1d1)];
            const _0x5e094f = yield (-0x2464 + -0x1861 + 0x3cc5, SentMessage_1[_0x50e6fa(0x217)])(_0x299cd9), _0x4400b1 = {};
            _0x4400b1[_0x50e6fa(0x229)] = _0x5e094f[_0x50e6fa(0x1c7)][-0x2197 + 0x1449 + 0x1 * 0xd4e]['id'], _0x4400b1[_0x50e6fa(0x1f1)] = _0x3e5349[_0x50e6fa(0x209)], _0x4400b1[_0x50e6fa(0x1f7)] = 0x2;
            const _0x5793e8 = Object[_0x50e6fa(0x207)](Object[_0x50e6fa(0x207)]({}, _0x5e7b48), _0x4400b1), _0x33574c = {};
            _0x33574c['id'] = _0x5e7b48['id'];
            const _0x467919 = {};
            _0x467919[_0x50e6fa(0x1e8)] = _0x33574c, yield Message_1[_0x50e6fa(0x217)][_0x50e6fa(0x1f9)](Object[_0x50e6fa(0x207)]({}, _0x5793e8), _0x467919), (0x2b7 + -0xc * 0x74 + 0x2b9, socketEmit_1[_0x50e6fa(0x217)])({
                'tenantId': _0x180aee[_0x50e6fa(0x20e)],
                'type': _0x3e5349[_0x50e6fa(0x21f)],
                'payload': Object[_0x50e6fa(0x207)](Object[_0x50e6fa(0x207)]({}, _0x5793e8[_0x50e6fa(0x20f)]), {
                    'mediaUrl': _0x5e7b48[_0x50e6fa(0x1e3)],
                    'messageId': _0x5793e8[_0x50e6fa(0x229)],
                    'status': _0x3e5349[_0x50e6fa(0x209)],
                    'ack': 0x2
                })
            }), logger_1[_0x50e6fa(0x1c6)][_0x50e6fa(0x1db)](_0x3e5349[_0x50e6fa(0x205)]), yield (0x1 * -0x1337 + -0x63 * 0x6 + 0x1589 * 0x1, SetTicketMessagesAsRead_1[_0x50e6fa(0x217)])(_0x180aee);
        }
    });
exports[_0xdf423a(0x217)] = Waba360SendMessagesSystem;