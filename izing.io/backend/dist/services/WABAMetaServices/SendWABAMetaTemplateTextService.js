'use strict';
const _0x5ddedf = _0x4ca8;
(function (_0x76a462, _0x1ec549) {
    const _0x35cafa = _0x4ca8, _0x15a48d = _0x76a462();
    while (!![]) {
        try {
            const _0x16b008 = parseInt(_0x35cafa(0xf3)) / (0x4be * -0x5 + 0x658 + 0x115f * 0x1) + -parseInt(_0x35cafa(0x110)) / (0x3dc * 0x2 + 0x194 * 0xa + 0x61 * -0x3e) + parseInt(_0x35cafa(0x115)) / (0x218a + -0x15d * -0x2 + -0x2441) * (-parseInt(_0x35cafa(0xe6)) / (0x2382 + 0xd49 + -0x30c7)) + parseInt(_0x35cafa(0x11a)) / (0xb * -0x8f + -0x168d + 0x1cb7) * (parseInt(_0x35cafa(0x11f)) / (0x1245 + 0xb7 * 0x2e + 0x3 * -0x110b)) + parseInt(_0x35cafa(0x133)) / (0x1 * -0x3e0 + -0x4 * 0x7cf + 0x2323 * 0x1) * (parseInt(_0x35cafa(0x123)) / (-0x3e1 * -0x9 + -0x189c + -0xb * 0xef)) + -parseInt(_0x35cafa(0x124)) / (-0x89e * 0x2 + 0x5 * 0x9d + 0xe34) + parseInt(_0x35cafa(0xe5)) / (0x1 * 0x1017 + -0x215e + 0x1151);
            if (_0x16b008 === _0x1ec549)
                break;
            else
                _0x15a48d['push'](_0x15a48d['shift']());
        } catch (_0x21890f) {
            _0x15a48d['push'](_0x15a48d['shift']());
        }
    }
}(_0x3510, -0xe257c * 0x1 + -0xbf82 + -0x1 * -0x1da7bd));
var __awaiter = this && this[_0x5ddedf(0x109)] || function (_0x1ed8e0, _0x1ae7a5, _0x34404e, _0x232da4) {
        const _0x27289d = _0x5ddedf, _0x46adda = {
                'MdqFp': function (_0x548fe1, _0x302110) {
                    return _0x548fe1(_0x302110);
                },
                'YqvdR': function (_0x19dc43, _0x128f9f) {
                    return _0x19dc43 instanceof _0x128f9f;
                },
                'RdZyf': function (_0x3240cb, _0x590de1) {
                    return _0x3240cb(_0x590de1);
                },
                'fticf': _0x27289d(0xea)
            };
        function _0x4ab95b(_0x35ed07) {
            const _0x51b3e0 = _0x27289d;
            return _0x46adda[_0x51b3e0(0xed)](_0x35ed07, _0x34404e) ? _0x35ed07 : new _0x34404e(function (_0x1397b6) {
                const _0xe41e03 = _0x51b3e0;
                _0x46adda[_0xe41e03(0x130)](_0x1397b6, _0x35ed07);
            });
        }
        return new (_0x34404e || (_0x34404e = Promise))(function (_0x2f7f80, _0x51250b) {
            const _0x413d87 = _0x27289d, _0x4850c5 = {
                    'cisfZ': function (_0x28a040, _0x4b533f) {
                        const _0x2a4372 = _0x4ca8;
                        return _0x46adda[_0x2a4372(0x111)](_0x28a040, _0x4b533f);
                    },
                    'IzDny': function (_0x47b173, _0x5c18ac) {
                        const _0x1877bb = _0x4ca8;
                        return _0x46adda[_0x1877bb(0x130)](_0x47b173, _0x5c18ac);
                    },
                    'NCMOC': function (_0x3c95ab, _0x1f4825) {
                        const _0x232b41 = _0x4ca8;
                        return _0x46adda[_0x232b41(0x130)](_0x3c95ab, _0x1f4825);
                    },
                    'KfVJZ': _0x46adda[_0x413d87(0xec)]
                };
            function _0x413bcd(_0xf411b3) {
                const _0x665239 = _0x413d87;
                try {
                    _0x4850c5[_0x665239(0x113)](_0x3317f6, _0x232da4[_0x665239(0xee)](_0xf411b3));
                } catch (_0x3bfc0d) {
                    _0x4850c5[_0x665239(0xef)](_0x51250b, _0x3bfc0d);
                }
            }
            function _0x4028fa(_0x126855) {
                const _0x313e2a = _0x413d87;
                try {
                    _0x4850c5[_0x313e2a(0xe8)](_0x3317f6, _0x232da4[_0x4850c5[_0x313e2a(0x11d)]](_0x126855));
                } catch (_0x26b135) {
                    _0x4850c5[_0x313e2a(0x113)](_0x51250b, _0x26b135);
                }
            }
            function _0x3317f6(_0x2fddb8) {
                const _0x5a5d77 = _0x413d87;
                _0x2fddb8[_0x5a5d77(0x140)] ? _0x46adda[_0x5a5d77(0x111)](_0x2f7f80, _0x2fddb8[_0x5a5d77(0x146)]) : _0x46adda[_0x5a5d77(0x111)](_0x4ab95b, _0x2fddb8[_0x5a5d77(0x146)])[_0x5a5d77(0x10b)](_0x413bcd, _0x4028fa);
            }
            _0x46adda[_0x413d87(0x111)](_0x3317f6, (_0x232da4 = _0x232da4[_0x413d87(0x108)](_0x1ed8e0, _0x1ae7a5 || []))[_0x413d87(0xee)]());
        });
    }, __importDefault = this && this[_0x5ddedf(0x114) + _0x5ddedf(0x13b)] || function (_0x53ea68) {
        const _0x186101 = _0x5ddedf;
        return _0x53ea68 && _0x53ea68[_0x186101(0x13a)] ? _0x53ea68 : { 'default': _0x53ea68 };
    };
const _0x5ddd23 = {};
function _0x3510() {
    const _0x32adda = [
        'ZFnJb',
        'template',
        'method',
        'language',
        '__esModule',
        'fault',
        'status',
        'SNUpD',
        '.0/',
        '../../help',
        'done',
        'n/json',
        'templates',
        'lbtuu',
        'data',
        'nhuzr',
        'value',
        'https://gr',
        'messages',
        'aph.facebo',
        'EueDD',
        'default',
        'payload',
        'erty',
        'getTime',
        'teMessage',
        '2365040UJKZGT',
        '1244oFTNXC',
        'ers/socket',
        'NCMOC',
        'contact',
        'throw',
        'headers',
        'fticf',
        'YqvdR',
        'next',
        'IzDny',
        'idFront',
        'eVAwS',
        'rs/AppErro',
        '1055497OuKWaA',
        'ls/Ticket',
        'Content-Ty',
        'fromMe',
        'defineProp',
        'sendTempla',
        'name',
        'where',
        'findOne',
        'sended',
        'MVHJj',
        'whatsapp',
        'messaging_',
        'lYVoN',
        'error',
        'vyJYZ',
        'now',
        'mediaType',
        'body',
        'EpolJ',
        'code',
        'apply',
        '__awaiter',
        'PP_OFFLINE',
        'then',
        'ticket:upd',
        'access_tok',
        'aLiwb',
        '../../mode',
        '2800850jYIbXO',
        'RdZyf',
        'oCsgQ',
        'cisfZ',
        '__importDe',
        '1347CYsDgq',
        'type',
        '../../erro',
        'ERR_WHATSA',
        'TlxqV',
        '5815xuAnVy',
        'kYtsH',
        'messageId',
        'KfVJZ',
        'ack',
        '5502gwREgu',
        'en=',
        '/messages?',
        'ok.com/v19',
        '57688PNIbdC',
        '3786462CeYQid',
        'CONNECTED',
        'chat:ack',
        'ate',
        'applicatio',
        'product',
        'bmToken',
        'Send\x20error',
        'POST',
        'update',
        'Emit',
        'url',
        'MdqFp',
        'axios',
        'tenantId',
        '553tFFIIy',
        'FOfyw',
        'ls/Message'
    ];
    _0x3510 = function () {
        return _0x32adda;
    };
    return _0x3510();
}
_0x5ddd23[_0x5ddedf(0x146)] = !![], Object[_0x5ddedf(0xf7) + _0x5ddedf(0xe2)](exports, _0x5ddedf(0x13a), _0x5ddd23);
const axios_1 = __importDefault(require(_0x5ddedf(0x131))), Ticket_1 = __importDefault(require(_0x5ddedf(0x10f) + _0x5ddedf(0xf4))), Message_1 = __importDefault(require(_0x5ddedf(0x10f) + _0x5ddedf(0x135))), socketEmit_1 = __importDefault(require(_0x5ddedf(0x13f) + _0x5ddedf(0xe7) + _0x5ddedf(0x12e))), AppError_1 = __importDefault(require(_0x5ddedf(0x117) + _0x5ddedf(0xf2) + 'r'));
function _0x4ca8(_0x3742ac, _0x437c4e) {
    const _0x4a5fd6 = _0x3510();
    return _0x4ca8 = function (_0x497b13, _0x204be3) {
        _0x497b13 = _0x497b13 - (0xe09 * 0x2 + 0x2 * -0xa2d + 0xa * -0xaf);
        let _0x5d84f0 = _0x4a5fd6[_0x497b13];
        return _0x5d84f0;
    }, _0x4ca8(_0x3742ac, _0x437c4e);
}
class SendTemplateMessage {
    [_0x5ddedf(0xf8) + _0x5ddedf(0xe4)]({
        from: _0x37179d,
        phone_number_id: _0x4dc525,
        message: _0x3b7b0d,
        ticket: _0x2f49bd,
        tenantId: _0x5c52c9,
        idFront: _0x54412f,
        whatsapp: _0x56a90a,
        language: _0x13e005,
        templateName: _0x1aa247
    }) {
        const _0x5b7865 = _0x5ddedf, _0x20d6c6 = {
                'nhuzr': function (_0x1c1e70, _0x73095f) {
                    return _0x1c1e70 !== _0x73095f;
                },
                'lYVoN': _0x5b7865(0x125),
                'TlxqV': _0x5b7865(0x118) + _0x5b7865(0x10a),
                'eVAwS': function (_0x5e55fd, _0x2f2dd5) {
                    return _0x5e55fd === _0x2f2dd5;
                },
                'MVHJj': _0x5b7865(0x12c),
                'lbtuu': _0x5b7865(0xfe),
                'EueDD': _0x5b7865(0x137),
                'ZFnJb': _0x5b7865(0x128) + _0x5b7865(0x141),
                'vyJYZ': function (_0x368a53, _0x3ba2ec) {
                    return _0x368a53 || _0x3ba2ec;
                },
                'FOfyw': _0x5b7865(0x142),
                'aLiwb': _0x5b7865(0xfc),
                'EpolJ': _0x5b7865(0x10c) + _0x5b7865(0x127),
                'kYtsH': _0x5b7865(0x126),
                'SNUpD': _0x5b7865(0x12b) + ':',
                'oCsgQ': function (_0x34c86d, _0x2b18c1, _0x4481c2, _0x5c0695, _0x3998b1) {
                    return _0x34c86d(_0x2b18c1, _0x4481c2, _0x5c0695, _0x3998b1);
                }
            };
        return _0x20d6c6[_0x5b7865(0x112)](__awaiter, this, void (-0xf56 + -0x1 * 0x202d + -0x1 * -0x2f83), void (0x789 * -0x3 + 0xed6 * 0x1 + 0x7c5), function* () {
            const _0x50c0de = _0x5b7865;
            if (_0x20d6c6[_0x50c0de(0x145)](_0x56a90a[_0x50c0de(0x13c)], _0x20d6c6[_0x50c0de(0x100)]))
                throw new AppError_1[(_0x50c0de(0x14b))](_0x20d6c6[_0x50c0de(0x119)], 0xe * -0xb3 + -0x17 * -0xa5 + -0x7 * 0x7f);
            try {
                const _0x2e29e4 = _0x50c0de(0x147) + _0x50c0de(0x149) + _0x50c0de(0x122) + _0x50c0de(0x13e) + _0x4dc525 + (_0x50c0de(0x121) + _0x50c0de(0x10d) + _0x50c0de(0x120)) + (_0x20d6c6[_0x50c0de(0xf1)](_0x56a90a, null) || _0x20d6c6[_0x50c0de(0xf1)](_0x56a90a, void (0x6 * -0x61 + 0x733 + -0x4ed)) ? void (0x1604 + 0x29 * -0x9e + 0x34a) : _0x56a90a[_0x50c0de(0x12a)]), _0x3105b5 = {};
                _0x3105b5[_0x50c0de(0x107)] = _0x13e005;
                const _0x16d9a2 = {};
                _0x16d9a2[_0x50c0de(0xf9)] = _0x1aa247, _0x16d9a2[_0x50c0de(0x139)] = _0x3105b5;
                const _0x397668 = {};
                _0x397668[_0x50c0de(0x138)] = _0x20d6c6[_0x50c0de(0xfd)], _0x397668[_0x50c0de(0x12f)] = _0x2e29e4, _0x397668[_0x50c0de(0x144)] = {}, _0x397668[_0x50c0de(0xeb)] = {}, _0x397668[_0x50c0de(0x144)][_0x50c0de(0xff) + _0x50c0de(0x129)] = _0x20d6c6[_0x50c0de(0x143)], _0x397668[_0x50c0de(0x144)]['to'] = _0x37179d, _0x397668[_0x50c0de(0x144)][_0x50c0de(0x116)] = _0x20d6c6[_0x50c0de(0x14a)], _0x397668[_0x50c0de(0x144)][_0x50c0de(0x137)] = _0x16d9a2, _0x397668[_0x50c0de(0xeb)][_0x50c0de(0xf5) + 'pe'] = _0x20d6c6[_0x50c0de(0x136)];
                const _0x598df8 = yield (-0x1fbf + 0x1 * 0xc6e + 0x1351, axios_1[_0x50c0de(0x14b)])(_0x397668);
                let _0x32be5d = Date[_0x50c0de(0x103)]();
                const _0x3e0b92 = {
                        'messageId': _0x598df8[_0x50c0de(0x144)][_0x50c0de(0x148)][-0xbab + -0x1b41 + 0x26ec]['id'] || '',
                        'ticketId': _0x2f49bd['id'],
                        'contactId': _0x2f49bd[_0x50c0de(0xe9)]['id'],
                        'body': _0x20d6c6[_0x50c0de(0x102)](_0x3b7b0d, ''),
                        'fromMe': !![],
                        'mediaType': _0x20d6c6[_0x50c0de(0x134)],
                        'read': !![],
                        'ack': 0x2,
                        'timestamp': _0x32be5d,
                        'status': _0x20d6c6[_0x50c0de(0x10e)]
                    }, _0x3cccfb = {};
                _0x3cccfb['id'] = _0x2f49bd['id'];
                const _0x5bedae = {};
                _0x5bedae[_0x50c0de(0xfa)] = _0x3cccfb;
                const _0x104566 = yield Ticket_1[_0x50c0de(0x14b)][_0x50c0de(0xfb)](_0x5bedae);
                if (!_0x104566)
                    return;
                yield _0x104566[_0x50c0de(0x12d)]({
                    'lastMessage': _0x3e0b92[_0x50c0de(0x105)],
                    'lastMessageAt': new Date()[_0x50c0de(0xe3)](),
                    'answered': _0x598df8[_0x50c0de(0x144)][_0x50c0de(0xf6)] || ![]
                });
                const _0x2d9bae = {};
                _0x2d9bae[_0x50c0de(0xf0)] = _0x54412f, _0x2d9bae[_0x50c0de(0x132)] = _0x5c52c9;
                const _0x1778e6 = {};
                _0x1778e6[_0x50c0de(0xfa)] = _0x2d9bae;
                const _0x14ceda = yield Message_1[_0x50c0de(0x14b)][_0x50c0de(0xfb)](_0x1778e6);
                if (!_0x14ceda)
                    return;
                const _0x35ed31 = {};
                _0x35ed31[_0x50c0de(0x11c)] = _0x598df8[_0x50c0de(0x144)][_0x50c0de(0x148)][0x9e4 + -0x111 * -0x1b + -0x26af]['id'], _0x35ed31[_0x50c0de(0x104)] = _0x20d6c6[_0x50c0de(0x134)], _0x35ed31[_0x50c0de(0x11e)] = 0x2, _0x35ed31[_0x50c0de(0x13c)] = _0x20d6c6[_0x50c0de(0x10e)], yield _0x14ceda[_0x50c0de(0x12d)](_0x35ed31);
                const _0x1c587f = {};
                _0x1c587f[_0x50c0de(0x132)] = _0x5c52c9, _0x1c587f[_0x50c0de(0x116)] = _0x20d6c6[_0x50c0de(0x106)], _0x1c587f[_0x50c0de(0x14c)] = _0x2f49bd, (-0x9eb + -0x7c9 * 0x1 + -0x1 * -0x11b4, socketEmit_1[_0x50c0de(0x14b)])(_0x1c587f);
                const _0x1653d8 = {};
                _0x1653d8[_0x50c0de(0x11c)] = _0x598df8[_0x50c0de(0x144)][_0x50c0de(0x148)][-0x29 * 0x7c + 0x3 * -0x98f + -0x23 * -0x163]['id'], _0x1653d8[_0x50c0de(0x132)] = _0x5c52c9;
                const _0xc0661d = {};
                _0xc0661d[_0x50c0de(0xfa)] = _0x1653d8;
                const _0x45c696 = yield Message_1[_0x50c0de(0x14b)][_0x50c0de(0xfb)](_0xc0661d);
                if (!_0x45c696)
                    return;
                const _0x367918 = {};
                return _0x367918[_0x50c0de(0x132)] = _0x5c52c9, _0x367918[_0x50c0de(0x116)] = _0x20d6c6[_0x50c0de(0x11b)], _0x367918[_0x50c0de(0x14c)] = _0x45c696, (-0x412 + -0xf3a + 0x1 * 0x134c, socketEmit_1[_0x50c0de(0x14b)])(_0x367918), _0x598df8[_0x50c0de(0x144)];
            } catch (_0x17d217) {
                console[_0x50c0de(0x101)](_0x20d6c6[_0x50c0de(0x13d)], _0x17d217);
                throw _0x17d217;
            }
        });
    }
}
exports[_0x5ddedf(0x14b)] = SendTemplateMessage;