'use strict';
const _0x422f96 = _0x1466;
function _0x1d95() {
    const _0x26bb04 = [
        'ontactOpen',
        'dialogflow',
        '46XtLNDR',
        'payload',
        'then',
        'isActiveDe',
        'where',
        'contactId',
        'Services/S',
        'defineProp',
        'lnWBq',
        'ketTypebot',
        'erty',
        'ObItC',
        'xDEKj',
        'mand',
        'etService',
        '1188845JJqPCr',
        'vice',
        './CreateLo',
        'ers/CheckC',
        'instagram',
        'Value',
        'ofjjB',
        'pCXMz',
        '5322611ezDdbt',
        'whatsapp',
        'sWpUj',
        'gTicketSer',
        'logFlowSta',
        'findOne',
        'Emit',
        'ketChatGpt',
        'hJsRN',
        'ate',
        'NG_TICKET',
        'ZVRxR',
        '9195174FUuvAA',
        'tenantId',
        'done',
        'value',
        'qerXW',
        'qRWjz',
        'typebotAll',
        'Status',
        'rs/AppErro',
        'Tickets',
        'chatgptAll',
        'newDefault',
        '__esModule',
        'DefaultTic',
        'ERR_CREATI',
        'isGroup',
        'default',
        '__awaiter',
        'ers/Update',
        'type',
        './ShowTick',
        '../../help',
        'enabled',
        'ksVyI',
        'aultWhatsA',
        'AllTickets',
        '24570656hUaBxf',
        '__importDe',
        'kyige',
        'howContact',
        'channel',
        'status',
        'dAbOp',
        'gpbpQ',
        '45263JwfAlE',
        'apply',
        '4669401zDldps',
        'fault',
        'yVUBW',
        'userId',
        'ers/GetDef',
        'XQxuG',
        'telegram',
        'create',
        '../Contact',
        'ajZul',
        'throw',
        'DefaultDia',
        'WJmJp',
        'ls/Setting',
        'key',
        'ticket',
        '../../mode',
        'eSnak',
        'BKnaj',
        'ElAGY',
        'ticketId',
        'tus',
        '../../erro',
        'next',
        'includes',
        '1312928fdZJyc',
        'ers/socket',
        'ticket:upd',
        '$create',
        'Service'
    ];
    _0x1d95 = function () {
        return _0x26bb04;
    };
    return _0x1d95();
}
function _0x1466(_0x3fc552, _0x3b3d7d) {
    const _0x31aa39 = _0x1d95();
    return _0x1466 = function (_0x205330, _0x35c61d) {
        _0x205330 = _0x205330 - (-0x16fd + 0x10c6 + 0x7c2);
        let _0x5b9a38 = _0x31aa39[_0x205330];
        return _0x5b9a38;
    }, _0x1466(_0x3fc552, _0x3b3d7d);
}
(function (_0x4ae455, _0x41839e) {
    const _0x26318a = _0x1466, _0x4deb71 = _0x4ae455();
    while (!![]) {
        try {
            const _0x59b783 = parseInt(_0x26318a(0x1de)) / (-0xec3 * -0x1 + -0x200d + -0xe9 * -0x13) * (parseInt(_0x26318a(0x199)) / (0x851 * 0x3 + 0x9 * 0x245 + -0x2d5e)) + -parseInt(_0x26318a(0x1e0)) / (-0x796 * 0x4 + 0x23e7 + -0x163 * 0x4) + parseInt(_0x26318a(0x192)) / (-0x13df + 0x641 + 0x5 * 0x2ba) + parseInt(_0x26318a(0x1a8)) / (0x8a1 + 0x11 * 0x241 + -0x2eed) + -parseInt(_0x26318a(0x1bc)) / (-0xa2a + -0x1c54 + -0x244 * -0x11) + -parseInt(_0x26318a(0x1b0)) / (0x2f1 + 0x826 * -0x2 + 0x1 * 0xd62) + parseInt(_0x26318a(0x1d6)) / (0xc4d * 0x1 + 0x1b04 + -0x2749);
            if (_0x59b783 === _0x41839e)
                break;
            else
                _0x4deb71['push'](_0x4deb71['shift']());
        } catch (_0x18cc6a) {
            _0x4deb71['push'](_0x4deb71['shift']());
        }
    }
}(_0x1d95, 0x19e1d + 0x5c3a5 + 0x54493));
var __awaiter = this && this[_0x422f96(0x1cd)] || function (_0x3d015b, _0x52f9d0, _0x234abd, _0x15291b) {
        const _0x828117 = _0x422f96, _0x199556 = {
                'XQxuG': function (_0x341e47, _0xb7ad88) {
                    return _0x341e47(_0xb7ad88);
                },
                'sWpUj': function (_0x7678b, _0x355617) {
                    return _0x7678b instanceof _0x355617;
                },
                'pCXMz': _0x828117(0x1ea),
                'ksVyI': function (_0x3d25b6, _0xcabd) {
                    return _0x3d25b6(_0xcabd);
                }
            };
        function _0x3c22e3(_0x5a8287) {
            const _0xa10b54 = _0x828117, _0x451d2a = {
                    'eSnak': function (_0x43d593, _0x414d01) {
                        const _0x1daddb = _0x1466;
                        return _0x199556[_0x1daddb(0x1e5)](_0x43d593, _0x414d01);
                    }
                };
            return _0x199556[_0xa10b54(0x1b2)](_0x5a8287, _0x234abd) ? _0x5a8287 : new _0x234abd(function (_0x160aba) {
                const _0x34bd62 = _0xa10b54;
                _0x451d2a[_0x34bd62(0x1f1)](_0x160aba, _0x5a8287);
            });
        }
        return new (_0x234abd || (_0x234abd = Promise))(function (_0x1fcbbe, _0xbc9228) {
            const _0x56605f = _0x828117, _0x536c60 = {
                    'WJmJp': function (_0x4c250d, _0x3f76cb) {
                        const _0x5d1185 = _0x1466;
                        return _0x199556[_0x5d1185(0x1e5)](_0x4c250d, _0x3f76cb);
                    },
                    'qerXW': function (_0xbc400b, _0x37e173) {
                        const _0x56a192 = _0x1466;
                        return _0x199556[_0x56a192(0x1e5)](_0xbc400b, _0x37e173);
                    },
                    'ObItC': _0x199556[_0x56605f(0x1af)]
                };
            function _0x42d24a(_0x129281) {
                const _0x41d9a5 = _0x56605f;
                try {
                    _0x536c60[_0x41d9a5(0x1ec)](_0x1a005d, _0x15291b[_0x41d9a5(0x190)](_0x129281));
                } catch (_0x122c41) {
                    _0x536c60[_0x41d9a5(0x1c0)](_0xbc9228, _0x122c41);
                }
            }
            function _0x61b901(_0x355e8d) {
                const _0x17097d = _0x56605f;
                try {
                    _0x536c60[_0x17097d(0x1c0)](_0x1a005d, _0x15291b[_0x536c60[_0x17097d(0x1a4)]](_0x355e8d));
                } catch (_0x4c8a86) {
                    _0x536c60[_0x17097d(0x1c0)](_0xbc9228, _0x4c8a86);
                }
            }
            function _0x1a005d(_0x1cc9e7) {
                const _0x1f7b65 = _0x56605f;
                _0x1cc9e7[_0x1f7b65(0x1be)] ? _0x536c60[_0x1f7b65(0x1c0)](_0x1fcbbe, _0x1cc9e7[_0x1f7b65(0x1bf)]) : _0x536c60[_0x1f7b65(0x1ec)](_0x3c22e3, _0x1cc9e7[_0x1f7b65(0x1bf)])[_0x1f7b65(0x19b)](_0x42d24a, _0x61b901);
            }
            _0x199556[_0x56605f(0x1d3)](_0x1a005d, (_0x15291b = _0x15291b[_0x56605f(0x1df)](_0x3d015b, _0x52f9d0 || []))[_0x56605f(0x190)]());
        });
    }, __importDefault = this && this[_0x422f96(0x1d7) + _0x422f96(0x1e1)] || function (_0x423a4b) {
        const _0x6f77fc = _0x422f96;
        return _0x423a4b && _0x423a4b[_0x6f77fc(0x1c8)] ? _0x423a4b : { 'default': _0x423a4b };
    };
const _0x5af01 = {};
_0x5af01[_0x422f96(0x1bf)] = !![], Object[_0x422f96(0x1a0) + _0x422f96(0x1a3)](exports, _0x422f96(0x1c8), _0x5af01);
const AppError_1 = __importDefault(require(_0x422f96(0x18f) + _0x422f96(0x1c4) + 'r')), CheckContactOpenTickets_1 = __importDefault(require(_0x422f96(0x1d1) + _0x422f96(0x1ab) + _0x422f96(0x197) + _0x422f96(0x1c5))), GetDefaultWhatsApp_1 = __importDefault(require(_0x422f96(0x1d1) + _0x422f96(0x1e4) + _0x422f96(0x1d4) + 'pp')), socketEmit_1 = __importDefault(require(_0x422f96(0x1d1) + _0x422f96(0x193) + _0x422f96(0x1b6))), ShowContactService_1 = __importDefault(require(_0x422f96(0x1e8) + _0x422f96(0x19f) + _0x422f96(0x1d9) + _0x422f96(0x196))), CreateLogTicketService_1 = __importDefault(require(_0x422f96(0x1aa) + _0x422f96(0x1b3) + _0x422f96(0x1a9))), ShowTicketService_1 = __importDefault(require(_0x422f96(0x1d0) + _0x422f96(0x1a7))), Setting_1 = __importDefault(require(_0x422f96(0x1f0) + _0x422f96(0x1ed))), UpdateDefaultTicketChatGptStatus_1 = __importDefault(require(_0x422f96(0x1d1) + _0x422f96(0x1ce) + _0x422f96(0x1c9) + _0x422f96(0x1b7) + _0x422f96(0x1c3))), UpdateDefaultTicketTypebotStatus_1 = __importDefault(require(_0x422f96(0x1d1) + _0x422f96(0x1ce) + _0x422f96(0x1c9) + _0x422f96(0x1a2) + _0x422f96(0x1c3))), UpdateDefaultDialogFlowStatus_1 = __importDefault(require(_0x422f96(0x1d1) + _0x422f96(0x1ce) + _0x422f96(0x1eb) + _0x422f96(0x1b4) + _0x422f96(0x18e))), CreateTicketService = ({
        contactId: _0x159ee2,
        status: _0x544def,
        userId: _0x17287c,
        tenantId: _0x2f3fdf,
        channel: _0x5909d1,
        channelId: channelId = undefined
    }) => __awaiter(void (-0x3d9 * 0x5 + -0xaf * 0x2f + 0x335e), void (0x4d2 + 0xe4b + -0x131d), void (-0xc * -0x269 + 0x1551 + 0x1 * -0x323d), function* () {
        const _0x34c427 = _0x422f96, _0x37ce44 = {};
        _0x37ce44[_0x34c427(0x1e2)] = _0x34c427(0x1ac), _0x37ce44[_0x34c427(0x1a5)] = _0x34c427(0x1e6), _0x37ce44[_0x34c427(0x1e9)] = _0x34c427(0x1b1), _0x37ce44[_0x34c427(0x1a1)] = _0x34c427(0x1ca) + _0x34c427(0x1ba), _0x37ce44[_0x34c427(0x1c1)] = _0x34c427(0x1ef), _0x37ce44[_0x34c427(0x1bb)] = _0x34c427(0x1e7), _0x37ce44[_0x34c427(0x18c)] = _0x34c427(0x1c6) + _0x34c427(0x1c5), _0x37ce44[_0x34c427(0x1dd)] = _0x34c427(0x1c2) + _0x34c427(0x1c5), _0x37ce44[_0x34c427(0x1b8)] = _0x34c427(0x198) + _0x34c427(0x1d5), _0x37ce44[_0x34c427(0x18b)] = function (_0xc4fc8c, _0x2d7dfc) {
            return _0xc4fc8c === _0x2d7dfc;
        }, _0x37ce44[_0x34c427(0x1ae)] = _0x34c427(0x1d2), _0x37ce44[_0x34c427(0x1d8)] = function (_0x3591ba, _0x52c42d) {
            return _0x3591ba === _0x52c42d;
        }, _0x37ce44[_0x34c427(0x1dc)] = _0x34c427(0x194) + _0x34c427(0x1b9);
        const _0xf59cf8 = _0x37ce44, _0x296fbc = yield (0x3 * 0x7f9 + -0x10eb * -0x1 + -0x28d6, GetDefaultWhatsApp_1[_0x34c427(0x1cc)])(_0x2f3fdf, channelId);
        if (!_0x5909d1 || ![
                _0xf59cf8[_0x34c427(0x1e2)],
                _0xf59cf8[_0x34c427(0x1a5)],
                _0xf59cf8[_0x34c427(0x1e9)]
            ][_0x34c427(0x191)](_0x5909d1))
            throw new AppError_1[(_0x34c427(0x1cc))](_0xf59cf8[_0x34c427(0x1a1)]);
        yield (0x1 * 0x43 + 0x5c9 * 0x3 + -0x119e, CheckContactOpenTickets_1[_0x34c427(0x1cc)])(_0x159ee2, channelId);
        const _0x32d773 = {};
        _0x32d773['id'] = _0x159ee2, _0x32d773[_0x34c427(0x1bd)] = _0x2f3fdf;
        const {isGroup: _0x280994} = yield (-0x1b0a + -0x3a * 0x51 + 0x48a * 0xa, ShowContactService_1[_0x34c427(0x1cc)])(_0x32d773), _0x572442 = {};
        _0x572442[_0x34c427(0x19e)] = _0x159ee2, _0x572442[_0x34c427(0x1db)] = _0x544def, _0x572442[_0x34c427(0x1cb)] = _0x280994, _0x572442[_0x34c427(0x1e3)] = _0x17287c, _0x572442[_0x34c427(0x19c) + _0x34c427(0x1a6)] = !![], _0x572442[_0x34c427(0x1da)] = _0x5909d1, _0x572442[_0x34c427(0x1bd)] = _0x2f3fdf;
        const {id: _0x23f23a} = yield _0x296fbc[_0x34c427(0x195)](_0xf59cf8[_0x34c427(0x1c1)], _0x572442), _0x274e02 = {};
        _0x274e02['id'] = _0x23f23a, _0x274e02[_0x34c427(0x1bd)] = _0x2f3fdf;
        const _0x51d883 = yield (0x1576 + 0x16b2 + -0x2c28, ShowTicketService_1[_0x34c427(0x1cc)])(_0x274e02);
        if (!_0x51d883)
            throw new AppError_1[(_0x34c427(0x1cc))](_0xf59cf8[_0x34c427(0x1a1)]);
        const _0x5a6f1b = {};
        _0x5a6f1b[_0x34c427(0x1e3)] = _0x17287c, _0x5a6f1b[_0x34c427(0x1bd)] = _0x51d883[_0x34c427(0x1bd)], _0x5a6f1b[_0x34c427(0x18d)] = _0x51d883['id'], _0x5a6f1b[_0x34c427(0x1cf)] = _0xf59cf8[_0x34c427(0x1bb)], yield (-0x11a2 + 0x36f * -0x4 + -0x16d * -0x16, CreateLogTicketService_1[_0x34c427(0x1cc)])(_0x5a6f1b);
        const _0x36de9e = {};
        _0x36de9e[_0x34c427(0x1ee)] = _0xf59cf8[_0x34c427(0x18c)], _0x36de9e[_0x34c427(0x1bd)] = _0x2f3fdf;
        const _0x243aee = {};
        _0x243aee[_0x34c427(0x19d)] = _0x36de9e;
        const _0x3fff01 = yield Setting_1[_0x34c427(0x1cc)][_0x34c427(0x1b5)](_0x243aee), _0x4733e6 = {};
        _0x4733e6[_0x34c427(0x1ee)] = _0xf59cf8[_0x34c427(0x1dd)], _0x4733e6[_0x34c427(0x1bd)] = _0x2f3fdf;
        const _0x4267fd = {};
        _0x4267fd[_0x34c427(0x19d)] = _0x4733e6;
        const _0xc9d12e = yield Setting_1[_0x34c427(0x1cc)][_0x34c427(0x1b5)](_0x4267fd), _0x586ae1 = {};
        _0x586ae1[_0x34c427(0x1ee)] = _0xf59cf8[_0x34c427(0x1b8)], _0x586ae1[_0x34c427(0x1bd)] = _0x2f3fdf;
        const _0x2de89d = {};
        _0x2de89d[_0x34c427(0x19d)] = _0x586ae1;
        const _0x4cea6a = yield Setting_1[_0x34c427(0x1cc)][_0x34c427(0x1b5)](_0x2de89d);
        if (_0x3fff01) {
            const _0x15e72f = _0xf59cf8[_0x34c427(0x18b)](_0x3fff01[_0x34c427(0x1bf)], _0xf59cf8[_0x34c427(0x1ae)]), _0x407c6d = {};
            _0x407c6d[_0x34c427(0x1bd)] = _0x2f3fdf, _0x407c6d[_0x34c427(0x18d)] = _0x51d883['id'], _0x407c6d[_0x34c427(0x1c7) + _0x34c427(0x1ad)] = _0x15e72f, yield (0x10e * 0x17 + 0x95e + -0x21a0, UpdateDefaultTicketChatGptStatus_1[_0x34c427(0x1cc)])(_0x407c6d);
        }
        if (_0xc9d12e) {
            const _0x350098 = _0xf59cf8[_0x34c427(0x1d8)](_0xc9d12e[_0x34c427(0x1bf)], _0xf59cf8[_0x34c427(0x1ae)]), _0x2b4a5f = {};
            _0x2b4a5f[_0x34c427(0x1bd)] = _0x2f3fdf, _0x2b4a5f[_0x34c427(0x18d)] = _0x51d883['id'], _0x2b4a5f[_0x34c427(0x1c7) + _0x34c427(0x1ad)] = _0x350098, yield (0x2d6 + -0x1d * 0x14e + 0x2300, UpdateDefaultTicketTypebotStatus_1[_0x34c427(0x1cc)])(_0x2b4a5f);
        }
        if (_0x4cea6a) {
            const _0x2d32bc = _0xf59cf8[_0x34c427(0x18b)](_0x4cea6a[_0x34c427(0x1bf)], _0xf59cf8[_0x34c427(0x1ae)]), _0xcd1939 = {};
            _0xcd1939[_0x34c427(0x1bd)] = _0x2f3fdf, _0xcd1939[_0x34c427(0x18d)] = _0x51d883['id'], _0xcd1939[_0x34c427(0x1c7) + _0x34c427(0x1ad)] = _0x2d32bc, yield (0x139 * -0x17 + 0x2689 + -0xa6a, UpdateDefaultDialogFlowStatus_1[_0x34c427(0x1cc)])(_0xcd1939);
        }
        const _0x40da7c = {};
        return _0x40da7c[_0x34c427(0x1bd)] = _0x2f3fdf, _0x40da7c[_0x34c427(0x1cf)] = _0xf59cf8[_0x34c427(0x1dc)], _0x40da7c[_0x34c427(0x19a)] = _0x51d883, (0x32 * -0xa4 + -0x1ee + 0x21f6, socketEmit_1[_0x34c427(0x1cc)])(_0x40da7c), _0x51d883;
    });
exports[_0x422f96(0x1cc)] = CreateTicketService;