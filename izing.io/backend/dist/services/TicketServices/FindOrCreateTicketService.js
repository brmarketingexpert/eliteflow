'use strict';
const _0x335c06 = _0x2aa2;
(function (_0x485b62, _0x2ff99c) {
    const _0x55d259 = _0x2aa2, _0x35ff25 = _0x485b62();
    while (!![]) {
        try {
            const _0x2aebb8 = parseInt(_0x55d259(0x233)) / (0xf3b + -0x204 + -0x26 * 0x59) + parseInt(_0x55d259(0x20d)) / (-0x111b + -0x11 * 0x1be + 0x2ebb) * (-parseInt(_0x55d259(0x1ed)) / (0x1 * 0xc1b + -0x109e + 0xc1 * 0x6)) + parseInt(_0x55d259(0x1d7)) / (-0x14 * -0x14c + 0x1f85 * 0x1 + -0x3971) + parseInt(_0x55d259(0x212)) / (0x26fd + -0x1844 + 0x4 * -0x3ad) + parseInt(_0x55d259(0x1e5)) / (0x21 * -0xb5 + 0x796 * 0x4 + 0x1 * -0x6fd) + parseInt(_0x55d259(0x1ec)) / (-0x3 * -0x1f4 + 0x10f3 + -0x16c8) + -parseInt(_0x55d259(0x1de)) / (0x24b7 + 0x1 * -0x593 + 0x2d4 * -0xb) * (parseInt(_0x55d259(0x222)) / (0x41 * -0x6b + -0xa93 + 0x25c7));
            if (_0x2aebb8 === _0x2ff99c)
                break;
            else
                _0x35ff25['push'](_0x35ff25['shift']());
        } catch (_0x13d87e) {
            _0x35ff25['push'](_0x35ff25['shift']());
        }
    }
}(_0x1920, 0x7aaa8 + 0x3604 * -0x29 + 0x63fbc));
function _0x2aa2(_0x25c7d9, _0x198ade) {
    const _0x3dd44d = _0x1920();
    return _0x2aa2 = function (_0x1b496a, _0x4e4d76) {
        _0x1b496a = _0x1b496a - (-0x20f4 + 0x14a8 + 0xddf);
        let _0x2b0c26 = _0x3dd44d[_0x1b496a];
        return _0x2b0c26;
    }, _0x2aa2(_0x25c7d9, _0x198ade);
}
var __awaiter = this && this[_0x335c06(0x1a5)] || function (_0x15ede0, _0x14ba12, _0x5401d8, _0x5ec66c) {
        const _0x18b6a7 = _0x335c06, _0x380715 = {
                'aCLSI': function (_0x595162, _0x578d85) {
                    return _0x595162(_0x578d85);
                },
                'RAtsR': function (_0x30e784, _0x1a95c9) {
                    return _0x30e784 instanceof _0x1a95c9;
                },
                'OTTVZ': function (_0x3fb4b5, _0x1ce297) {
                    return _0x3fb4b5(_0x1ce297);
                },
                'aWcbh': function (_0xbf1111, _0x90e91c) {
                    return _0xbf1111(_0x90e91c);
                },
                'JIztn': _0x18b6a7(0x1d3),
                'HpJrC': function (_0x20a229, _0x50a99e) {
                    return _0x20a229(_0x50a99e);
                },
                'OcFqc': function (_0x1aec26, _0xd762e0) {
                    return _0x1aec26(_0xd762e0);
                }
            };
        function _0x1066f5(_0x38a968) {
            const _0x470aaa = _0x18b6a7, _0x4eb34e = {
                    'pkLGi': function (_0x31b59b, _0x376ca8) {
                        const _0x34bcab = _0x2aa2;
                        return _0x380715[_0x34bcab(0x1ea)](_0x31b59b, _0x376ca8);
                    }
                };
            return _0x380715[_0x470aaa(0x1b5)](_0x38a968, _0x5401d8) ? _0x38a968 : new _0x5401d8(function (_0x2ca2ca) {
                const _0x1c09dd = _0x470aaa;
                _0x4eb34e[_0x1c09dd(0x220)](_0x2ca2ca, _0x38a968);
            });
        }
        return new (_0x5401d8 || (_0x5401d8 = Promise))(function (_0x234ef5, _0x7f9328) {
            const _0x5689e8 = _0x18b6a7, _0x269376 = {
                    'PuNlK': function (_0x41dd4d, _0x36892c) {
                        const _0x173224 = _0x2aa2;
                        return _0x380715[_0x173224(0x1b0)](_0x41dd4d, _0x36892c);
                    }
                };
            function _0x565eaa(_0x748275) {
                const _0xfe0af0 = _0x2aa2;
                try {
                    _0x380715[_0xfe0af0(0x1a0)](_0x5622aa, _0x5ec66c[_0xfe0af0(0x1e4)](_0x748275));
                } catch (_0x5705a1) {
                    _0x380715[_0xfe0af0(0x1a0)](_0x7f9328, _0x5705a1);
                }
            }
            function _0x8d9b5c(_0xa4207b) {
                const _0x55b3dd = _0x2aa2;
                try {
                    _0x380715[_0x55b3dd(0x1e7)](_0x5622aa, _0x5ec66c[_0x380715[_0x55b3dd(0x23c)]](_0xa4207b));
                } catch (_0x23226d) {
                    _0x380715[_0x55b3dd(0x240)](_0x7f9328, _0x23226d);
                }
            }
            function _0x5622aa(_0x841c4e) {
                const _0x462bf7 = _0x2aa2;
                _0x841c4e[_0x462bf7(0x206)] ? _0x269376[_0x462bf7(0x1d0)](_0x234ef5, _0x841c4e[_0x462bf7(0x1a7)]) : _0x269376[_0x462bf7(0x1d0)](_0x1066f5, _0x841c4e[_0x462bf7(0x1a7)])[_0x462bf7(0x1e3)](_0x565eaa, _0x8d9b5c);
            }
            _0x380715[_0x5689e8(0x1e7)](_0x5622aa, (_0x5ec66c = _0x5ec66c[_0x5689e8(0x1c0)](_0x15ede0, _0x14ba12 || []))[_0x5689e8(0x1e4)]());
        });
    }, __importDefault = this && this[_0x335c06(0x246) + _0x335c06(0x1e0)] || function (_0x38281f) {
        const _0x1bd282 = _0x335c06;
        return _0x38281f && _0x38281f[_0x1bd282(0x1fb)] ? _0x38281f : { 'default': _0x38281f };
    };
const _0x433cf6 = {};
_0x433cf6[_0x335c06(0x1a7)] = !![], Object[_0x335c06(0x1a4) + _0x335c06(0x21a)](exports, _0x335c06(0x1fb), _0x433cf6);
const sequelize_1 = require(_0x335c06(0x21f)), Contact_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x1fa))), Ticket_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x1cf))), User_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x216))), ShowTicketService_1 = __importDefault(require(_0x335c06(0x1b8) + _0x335c06(0x226))), CampaignContacts_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x23d) + _0x335c06(0x19a))), socketEmit_1 = __importDefault(require(_0x335c06(0x1d2) + _0x335c06(0x235) + _0x335c06(0x221))), CheckChatBotFlowWelcome_1 = __importDefault(require(_0x335c06(0x1d2) + _0x335c06(0x238) + _0x335c06(0x244) + _0x335c06(0x199))), CreateLogTicketService_1 = __importDefault(require(_0x335c06(0x21e) + _0x335c06(0x1b6) + _0x335c06(0x1dc))), Message_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x1d1))), ListSettingsService_1 = __importDefault(require(_0x335c06(0x1be) + _0x335c06(0x1fd) + _0x335c06(0x23e) + _0x335c06(0x208))), Setting_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x20c))), UpdateDefaultTicketChatGptStatus_1 = __importDefault(require(_0x335c06(0x1d2) + _0x335c06(0x232) + _0x335c06(0x20a) + _0x335c06(0x202) + _0x335c06(0x1d8))), UpdateDefaultTicketTypebotStatus_1 = __importDefault(require(_0x335c06(0x1d2) + _0x335c06(0x232) + _0x335c06(0x20a) + _0x335c06(0x1bf) + _0x335c06(0x1d8))), UpdateDefaultDialogFlowStatus_1 = __importDefault(require(_0x335c06(0x1d2) + _0x335c06(0x232) + _0x335c06(0x1af) + _0x335c06(0x21d) + _0x335c06(0x196))), Tenant_1 = __importDefault(require(_0x335c06(0x207) + _0x335c06(0x1fe))), FindOrCreateTicketService = ({
        contact: _0x17dff6,
        whatsappId: _0x1189b7,
        unreadMessages: _0x11dec7,
        tenantId: _0x1075e2,
        groupContact: _0x420008,
        msg: _0x22ef5f,
        isSync: _0x484b6a,
        channel: _0x2534f8
    }) => __awaiter(void (-0x1251 + -0x1250 + 0x24a1), void (0x1d40 + -0x23 * -0x91 + 0x1 * -0x3113), void (-0xb99 + -0x1227 + -0x11 * -0x1c0), function* () {
        const _0x2e166b = _0x335c06, _0x3df7bb = {};
        _0x3df7bb[_0x2e166b(0x22b)] = function (_0x389823, _0x46bb8b) {
            return _0x389823 === _0x46bb8b;
        }, _0x3df7bb[_0x2e166b(0x243)] = function (_0x43358b, _0x4fd755) {
            return _0x43358b === _0x4fd755;
        }, _0x3df7bb[_0x2e166b(0x210)] = function (_0x105a4c, _0x48f840) {
            return _0x105a4c === _0x48f840;
        }, _0x3df7bb[_0x2e166b(0x22c)] = function (_0x4cbbbe, _0x2624c0) {
            return _0x4cbbbe === _0x2624c0;
        }, _0x3df7bb[_0x2e166b(0x1c1)] = _0x2e166b(0x1ba), _0x3df7bb[_0x2e166b(0x195)] = function (_0x313e00, _0x5abee7) {
            return _0x313e00 === _0x5abee7;
        }, _0x3df7bb[_0x2e166b(0x229)] = function (_0x37df35, _0x509425) {
            return _0x37df35 === _0x509425;
        }, _0x3df7bb[_0x2e166b(0x23f)] = function (_0x547f4d, _0xa07017) {
            return _0x547f4d === _0xa07017;
        }, _0x3df7bb[_0x2e166b(0x1c9)] = _0x2e166b(0x241), _0x3df7bb[_0x2e166b(0x198)] = function (_0xd24e3, _0x5ed64f) {
            return _0xd24e3 === _0x5ed64f;
        }, _0x3df7bb[_0x2e166b(0x1a9)] = function (_0x54775f, _0x2b66dd) {
            return _0x54775f === _0x2b66dd;
        }, _0x3df7bb[_0x2e166b(0x1f2)] = function (_0x467ee6, _0x5ceba7) {
            return _0x467ee6 === _0x5ceba7;
        }, _0x3df7bb[_0x2e166b(0x22e)] = _0x2e166b(0x1f0), _0x3df7bb[_0x2e166b(0x1d6)] = _0x2e166b(0x1b4), _0x3df7bb[_0x2e166b(0x1e8)] = _0x2e166b(0x1cb), _0x3df7bb[_0x2e166b(0x239)] = _0x2e166b(0x1f6), _0x3df7bb[_0x2e166b(0x1c5)] = _0x2e166b(0x214), _0x3df7bb[_0x2e166b(0x1d9)] = _0x2e166b(0x1f7), _0x3df7bb[_0x2e166b(0x230)] = _0x2e166b(0x1ce), _0x3df7bb[_0x2e166b(0x1d4)] = _0x2e166b(0x242), _0x3df7bb[_0x2e166b(0x200)] = _0x2e166b(0x1a2), _0x3df7bb[_0x2e166b(0x227)] = _0x2e166b(0x203), _0x3df7bb[_0x2e166b(0x1ca)] = _0x2e166b(0x22d), _0x3df7bb[_0x2e166b(0x197)] = _0x2e166b(0x19d), _0x3df7bb[_0x2e166b(0x1cd)] = _0x2e166b(0x1ee), _0x3df7bb[_0x2e166b(0x20b)] = _0x2e166b(0x1eb), _0x3df7bb[_0x2e166b(0x23a)] = _0x2e166b(0x22f), _0x3df7bb[_0x2e166b(0x205)] = function (_0x53c227, _0x12a4b1) {
            return _0x53c227 > _0x12a4b1;
        }, _0x3df7bb[_0x2e166b(0x1dd)] = _0x2e166b(0x1ad) + _0x2e166b(0x19f), _0x3df7bb[_0x2e166b(0x1f4)] = _0x2e166b(0x1e2), _0x3df7bb[_0x2e166b(0x228)] = _0x2e166b(0x1c3), _0x3df7bb[_0x2e166b(0x1df)] = function (_0x96e5c9, _0x1dff75) {
            return _0x96e5c9 === _0x1dff75;
        }, _0x3df7bb[_0x2e166b(0x1ab)] = function (_0xd465ee, _0x520b29) {
            return _0xd465ee === _0x520b29;
        }, _0x3df7bb[_0x2e166b(0x1b7)] = _0x2e166b(0x1ae), _0x3df7bb[_0x2e166b(0x194)] = function (_0xfb2e40, _0x2ae237) {
            return _0xfb2e40 === _0x2ae237;
        }, _0x3df7bb[_0x2e166b(0x1c7)] = _0x2e166b(0x1f8), _0x3df7bb[_0x2e166b(0x1bd)] = _0x2e166b(0x1e9) + _0x2e166b(0x1c8), _0x3df7bb[_0x2e166b(0x1db)] = _0x2e166b(0x1aa) + _0x2e166b(0x1c8), _0x3df7bb[_0x2e166b(0x1a8)] = _0x2e166b(0x224) + _0x2e166b(0x21b), _0x3df7bb[_0x2e166b(0x1f1)] = function (_0x269598, _0x14295d) {
            return _0x269598 === _0x14295d;
        }, _0x3df7bb[_0x2e166b(0x231)] = function (_0x39e9c1, _0x592b95) {
            return _0x39e9c1 === _0x592b95;
        }, _0x3df7bb[_0x2e166b(0x1b2)] = _0x2e166b(0x1fc), _0x3df7bb[_0x2e166b(0x23b)] = _0x2e166b(0x225), _0x3df7bb[_0x2e166b(0x1f9)] = function (_0x270f92, _0xbd6d6f) {
            return _0x270f92 === _0xbd6d6f;
        };
        const _0x2a276a = _0x3df7bb;
        var _0x1d5bbe, _0x2b9e2d, _0x3c0d9f, _0x553a27, _0x13838b, _0x5e27b6;
        if (_0x22ef5f && _0x22ef5f[_0x2e166b(0x1f5)]) {
            const _0x3dad8e = yield CampaignContacts_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)]({
                'where': {
                    'contactId': _0x17dff6['id'],
                    'messageId': (_0x2a276a[_0x2e166b(0x22b)](_0x1d5bbe = _0x22ef5f['id'], null) || _0x2a276a[_0x2e166b(0x243)](_0x1d5bbe, void (-0xb07 * -0x2 + -0x83c + -0xdd2)) ? void (0x1240 + -0x31 * -0xb3 + 0x1 * -0x3483) : _0x1d5bbe['id']) || _0x22ef5f[_0x2e166b(0x1bc)] || _0x22ef5f[_0x2e166b(0x22a)]
                }
            });
            if (_0x2a276a[_0x2e166b(0x210)](_0x3dad8e, null) || _0x2a276a[_0x2e166b(0x243)](_0x3dad8e, void (0x1b8d + -0x1 * -0x17a6 + -0x3333)) ? void (-0x2 * 0x2f5 + 0x1 * 0x68c + 0x12 * -0x9) : _0x3dad8e['id']) {
                const _0x579d92 = {};
                return _0x579d92[_0x2e166b(0x19e) + _0x2e166b(0x204)] = !![], _0x579d92;
            }
        }
        if (_0x22ef5f && _0x22ef5f[_0x2e166b(0x1f5)]) {
            const _0x1881fd = yield Message_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)]({
                'where': { 'messageId': (_0x2a276a[_0x2e166b(0x22c)](_0x2b9e2d = _0x22ef5f['id'], null) || _0x2a276a[_0x2e166b(0x22c)](_0x2b9e2d, void (0x1158 + 0x66e + 0xbe3 * -0x2)) ? void (-0xd17 + -0x4c7 * 0x3 + 0x9c * 0x2d) : _0x2b9e2d['id']) || _0x22ef5f[_0x2e166b(0x1bc)] || _0x22ef5f[_0x2e166b(0x22a)] },
                'include': [_0x2a276a[_0x2e166b(0x1c1)]]
            });
            if (_0x2a276a[_0x2e166b(0x22c)](_0x2a276a[_0x2e166b(0x195)](_0x3c0d9f = _0x2a276a[_0x2e166b(0x229)](_0x1881fd, null) || _0x2a276a[_0x2e166b(0x22b)](_0x1881fd, void (-0x7 * -0x2e1 + 0x12d4 + -0x26fb)) ? void (-0x1ed9 + -0x1 * 0x1ade + -0xb8b * -0x5) : _0x1881fd[_0x2e166b(0x1ba)], null) || _0x2a276a[_0x2e166b(0x23f)](_0x3c0d9f, void (0x1 * -0x21a9 + -0x9 * -0x10d + 0x1834)) ? void (0x79 * -0x4 + -0xe44 + 0x1028) : _0x3c0d9f[_0x2e166b(0x20e)], _0x2a276a[_0x2e166b(0x1c9)]) && _0x2a276a[_0x2e166b(0x198)](_0x2a276a[_0x2e166b(0x1a9)](_0x1881fd, null) || _0x2a276a[_0x2e166b(0x1f2)](_0x1881fd, void (0xeb4 * 0x1 + -0x11f0 + -0x5c * -0x9)) ? void (0x14a6 + -0x1 * -0x1346 + 0x4 * -0x9fb) : _0x1881fd[_0x2e166b(0x1ba)][_0x2e166b(0x1ac) + 'e'], _0x22ef5f[_0x2e166b(0x217)])) {
                const _0x3a9f2b = _0x1881fd[_0x2e166b(0x1ba)];
                return _0x3a9f2b[_0x2e166b(0x20f) + _0x2e166b(0x204)] = !![], _0x3a9f2b;
            }
        }
        const _0x50c2c7 = {
                [sequelize_1['Op']['or']]: [
                    _0x2a276a[_0x2e166b(0x22e)],
                    _0x2a276a[_0x2e166b(0x1d6)]
                ]
            }, _0x353f48 = {};
        _0x353f48[_0x2e166b(0x20e)] = _0x50c2c7, _0x353f48[_0x2e166b(0x201)] = _0x1075e2, _0x353f48[_0x2e166b(0x1ef)] = _0x1189b7, _0x353f48[_0x2e166b(0x1a3)] = _0x420008 ? _0x420008['id'] : _0x17dff6['id'];
        const _0x519dc1 = {};
        _0x519dc1[_0x2e166b(0x1d5)] = Contact_1[_0x2e166b(0x1ff)], _0x519dc1['as'] = _0x2a276a[_0x2e166b(0x1e8)], _0x519dc1[_0x2e166b(0x19b)] = [
            _0x2a276a[_0x2e166b(0x239)],
            _0x2a276a[_0x2e166b(0x1c5)],
            {
                'association': _0x2a276a[_0x2e166b(0x1d9)],
                'attributes': [
                    'id',
                    _0x2a276a[_0x2e166b(0x230)]
                ]
            }
        ];
        const _0x1a7440 = {};
        _0x1a7440[_0x2e166b(0x1d5)] = User_1[_0x2e166b(0x1ff)], _0x1a7440['as'] = _0x2a276a[_0x2e166b(0x1d4)], _0x1a7440[_0x2e166b(0x1a6)] = [
            'id',
            _0x2a276a[_0x2e166b(0x230)]
        ];
        const _0x42871a = {};
        _0x42871a[_0x2e166b(0x1cc) + 'n'] = _0x2a276a[_0x2e166b(0x200)], _0x42871a[_0x2e166b(0x1a6)] = [
            'id',
            _0x2a276a[_0x2e166b(0x230)],
            _0x2a276a[_0x2e166b(0x227)],
            _0x2a276a[_0x2e166b(0x1ca)]
        ];
        const _0x5550f9 = {};
        _0x5550f9[_0x2e166b(0x1c2)] = _0x353f48, _0x5550f9[_0x2e166b(0x19b)] = [
            _0x519dc1,
            _0x1a7440,
            _0x42871a
        ];
        let _0x3593de = yield Ticket_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0x5550f9);
        if (_0x3593de) {
            _0x11dec7 = [
                _0x2a276a[_0x2e166b(0x197)],
                _0x2a276a[_0x2e166b(0x1cd)],
                _0x2a276a[_0x2e166b(0x20b)],
                _0x2a276a[_0x2e166b(0x23a)]
            ][_0x2e166b(0x1bb)](_0x2534f8) && _0x2a276a[_0x2e166b(0x205)](_0x11dec7, -0x3a0 + -0x1 * 0x124b + 0x15eb) ? _0x11dec7 += _0x3593de[_0x2e166b(0x237) + _0x2e166b(0x1c4)] : _0x11dec7;
            const _0x5dc1b0 = {};
            _0x5dc1b0[_0x2e166b(0x237) + _0x2e166b(0x1c4)] = _0x11dec7, yield _0x3593de[_0x2e166b(0x223)](_0x5dc1b0);
            const _0x577381 = {};
            return _0x577381[_0x2e166b(0x201)] = _0x1075e2, _0x577381[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1dd)], _0x577381[_0x2e166b(0x1e6)] = _0x3593de, (-0x1 * -0x22c + 0x20ad + -0x22d9, socketEmit_1[_0x2e166b(0x1ff)])(_0x577381), _0x3593de;
        }
        if (_0x420008) {
            const _0x328e82 = {};
            _0x328e82[_0x2e166b(0x1a3)] = _0x420008['id'], _0x328e82[_0x2e166b(0x201)] = _0x1075e2, _0x328e82[_0x2e166b(0x1ef)] = _0x1189b7;
            const _0xc0923d = {};
            _0xc0923d[_0x2e166b(0x1c2)] = _0x328e82, _0xc0923d[_0x2e166b(0x1b3)] = [[
                    _0x2a276a[_0x2e166b(0x1f4)],
                    _0x2a276a[_0x2e166b(0x228)]
                ]], _0xc0923d[_0x2e166b(0x19b)] = [
                {
                    'model': Contact_1[_0x2e166b(0x1ff)],
                    'as': _0x2a276a[_0x2e166b(0x1e8)],
                    'include': [
                        _0x2a276a[_0x2e166b(0x239)],
                        _0x2a276a[_0x2e166b(0x1c5)],
                        {
                            'association': _0x2a276a[_0x2e166b(0x1d9)],
                            'attributes': [
                                'id',
                                _0x2a276a[_0x2e166b(0x230)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[_0x2e166b(0x1ff)],
                    'as': _0x2a276a[_0x2e166b(0x1d4)],
                    'attributes': [
                        'id',
                        _0x2a276a[_0x2e166b(0x230)]
                    ]
                },
                {
                    'association': _0x2a276a[_0x2e166b(0x200)],
                    'attributes': [
                        'id',
                        _0x2a276a[_0x2e166b(0x230)],
                        _0x2a276a[_0x2e166b(0x227)],
                        _0x2a276a[_0x2e166b(0x1ca)]
                    ]
                }
            ], _0x3593de = yield Ticket_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0xc0923d);
            if (_0x3593de) {
                const _0x4cef31 = {};
                _0x4cef31[_0x2e166b(0x20e)] = _0x2a276a[_0x2e166b(0x1d6)], _0x4cef31[_0x2e166b(0x1f3)] = null, _0x4cef31[_0x2e166b(0x237) + _0x2e166b(0x1c4)] = _0x11dec7, yield _0x3593de[_0x2e166b(0x223)](_0x4cef31);
                const _0x538af0 = {};
                return _0x538af0[_0x2e166b(0x201)] = _0x1075e2, _0x538af0[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1dd)], _0x538af0[_0x2e166b(0x1e6)] = _0x3593de, (-0x1 * 0x887 + 0x2584 + 0x29 * -0xb5, socketEmit_1[_0x2e166b(0x1ff)])(_0x538af0), _0x3593de;
            }
        } else {
            const _0x57e619 = {
                    [sequelize_1['Op']['in']]: [
                        _0x2a276a[_0x2e166b(0x22e)],
                        _0x2a276a[_0x2e166b(0x1d6)]
                    ]
                }, _0x24e708 = {};
            _0x24e708[_0x2e166b(0x20e)] = _0x57e619, _0x24e708[_0x2e166b(0x201)] = _0x1075e2, _0x24e708[_0x2e166b(0x1ef)] = _0x1189b7, _0x24e708[_0x2e166b(0x1a3)] = _0x17dff6['id'];
            const _0x516722 = {};
            _0x516722[_0x2e166b(0x1c2)] = _0x24e708, _0x516722[_0x2e166b(0x1b3)] = [[
                    _0x2a276a[_0x2e166b(0x1f4)],
                    _0x2a276a[_0x2e166b(0x228)]
                ]], _0x516722[_0x2e166b(0x19b)] = [
                {
                    'model': Contact_1[_0x2e166b(0x1ff)],
                    'as': _0x2a276a[_0x2e166b(0x1e8)],
                    'include': [
                        _0x2a276a[_0x2e166b(0x239)],
                        _0x2a276a[_0x2e166b(0x1c5)],
                        {
                            'association': _0x2a276a[_0x2e166b(0x1d9)],
                            'attributes': [
                                'id',
                                _0x2a276a[_0x2e166b(0x230)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[_0x2e166b(0x1ff)],
                    'as': _0x2a276a[_0x2e166b(0x1d4)],
                    'attributes': [
                        'id',
                        _0x2a276a[_0x2e166b(0x230)]
                    ]
                },
                {
                    'association': _0x2a276a[_0x2e166b(0x200)],
                    'attributes': [
                        'id',
                        _0x2a276a[_0x2e166b(0x230)],
                        _0x2a276a[_0x2e166b(0x227)],
                        _0x2a276a[_0x2e166b(0x1ca)]
                    ]
                }
            ], _0x3593de = yield Ticket_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0x516722);
            if (_0x3593de) {
                const _0x2c6956 = {};
                _0x2c6956[_0x2e166b(0x20e)] = _0x2a276a[_0x2e166b(0x1d6)], _0x2c6956[_0x2e166b(0x1f3)] = null, _0x2c6956[_0x2e166b(0x237) + _0x2e166b(0x1c4)] = _0x11dec7, yield _0x3593de[_0x2e166b(0x223)](_0x2c6956);
                const _0xb26749 = {};
                _0xb26749[_0x2e166b(0x201)] = _0x1075e2, _0xb26749[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1dd)], _0xb26749[_0x2e166b(0x1e6)] = _0x3593de, (0x814 + -0xbc * 0xd + 0x178, socketEmit_1[_0x2e166b(0x1ff)])(_0xb26749);
                const _0x3217ef = {};
                _0x3217ef['id'] = _0x3593de['id'], _0x3217ef[_0x2e166b(0x201)] = _0x1075e2;
                const _0x5a21d8 = yield (-0xea4 + 0x13bf + -0x1 * 0x51b, ShowTicketService_1[_0x2e166b(0x1ff)])(_0x3217ef), _0x380d88 = {};
                return _0x380d88[_0x2e166b(0x201)] = _0x1075e2, _0x380d88[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1dd)], _0x380d88[_0x2e166b(0x1e6)] = _0x5a21d8, (0x4a0 * 0x1 + 0x851 * 0x1 + -0xcf1, socketEmit_1[_0x2e166b(0x1ff)])(_0x380d88), _0x3593de;
            }
        }
        const _0x4251c0 = _0x2a276a[_0x2e166b(0x23f)](_0x2a276a[_0x2e166b(0x1df)](_0x13838b = _0x2a276a[_0x2e166b(0x1a9)](_0x553a27 = yield (-0x636 * 0x5 + 0x1 * -0x8cd + 0x27db, ListSettingsService_1[_0x2e166b(0x1ff)])(_0x1075e2), null) || _0x2a276a[_0x2e166b(0x1ab)](_0x553a27, void (0x9aa * 0x1 + 0x34 * 0x48 + -0xc25 * 0x2)) ? void (-0xd6b + -0x15a6 + -0xbf * -0x2f) : _0x553a27[_0x2e166b(0x193)](_0x3d67ff => _0x3d67ff[_0x2e166b(0x1a1)] === _0x2e166b(0x1c6) + _0x2e166b(0x1b1) + 'ts'), null) || _0x2a276a[_0x2e166b(0x1a9)](_0x13838b, void (0xfe5 + -0x998 + -0x64d)) ? void (0x2 * 0x6e5 + 0x1 * -0x1120 + 0x7 * 0x7a) : _0x13838b[_0x2e166b(0x1a7)], _0x2a276a[_0x2e166b(0x1b7)]) || ![], _0xf3f298 = {};
        _0xf3f298[_0x2e166b(0x1a3)] = _0x420008 ? _0x420008['id'] : _0x17dff6['id'], _0xf3f298[_0x2e166b(0x20e)] = _0x2a276a[_0x2e166b(0x1d6)], _0xf3f298[_0x2e166b(0x1b9)] = !!_0x420008, _0xf3f298[_0x2e166b(0x237) + _0x2e166b(0x1c4)] = _0x11dec7, _0xf3f298[_0x2e166b(0x1ef)] = _0x1189b7, _0xf3f298[_0x2e166b(0x201)] = _0x1075e2, _0xf3f298[_0x2e166b(0x1e1)] = _0x2534f8;
        const _0x2a2e3e = _0xf3f298;
        if (_0x4251c0 && _0x17dff6['id']) {
            const _0xf21828 = _0x17dff6, _0x4d908d = yield _0xf21828[_0x2e166b(0x236)]();
            _0x4d908d && (_0x2a276a[_0x2e166b(0x195)](_0x5e27b6 = _0x4d908d[0x185 + -0x26e * 0xb + 0x9 * 0x2cd], null) || _0x2a276a[_0x2e166b(0x194)](_0x5e27b6, void (-0xbda + -0x52 * -0x6 + 0x9ee)) ? void (-0x1f2a + -0x1e6d * -0x1 + 0xbd) : _0x5e27b6['id']) && (_0x2a2e3e[_0x2e166b(0x20e)] = _0x2a276a[_0x2e166b(0x22e)], _0x2a2e3e[_0x2e166b(0x1f3)] = _0x4d908d[-0x43 * 0x1f + -0x3d6 + 0xbf3]['id'], _0x2a2e3e[_0x2e166b(0x245) + _0x2e166b(0x218)] = new Date()[_0x2e166b(0x213)]());
        }
        const _0x523f30 = yield Ticket_1[_0x2e166b(0x1ff)][_0x2e166b(0x1f8)](_0x2a2e3e), _0x40b176 = {};
        _0x40b176[_0x2e166b(0x201)] = _0x523f30[_0x2e166b(0x201)], _0x40b176[_0x2e166b(0x1da)] = _0x523f30['id'], _0x40b176[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1c7)], yield (-0x20aa + 0x2104 + -0x6 * 0xf, CreateLogTicketService_1[_0x2e166b(0x1ff)])(_0x40b176);
        const _0x13bed2 = {};
        _0x13bed2[_0x2e166b(0x1a1)] = _0x2a276a[_0x2e166b(0x1bd)], _0x13bed2[_0x2e166b(0x201)] = _0x1075e2;
        const _0x1badba = {};
        _0x1badba[_0x2e166b(0x1c2)] = _0x13bed2;
        const _0x5c40c0 = yield Setting_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0x1badba), _0x575197 = {};
        _0x575197[_0x2e166b(0x1a1)] = _0x2a276a[_0x2e166b(0x1db)], _0x575197[_0x2e166b(0x201)] = _0x1075e2;
        const _0xa8e819 = {};
        _0xa8e819[_0x2e166b(0x1c2)] = _0x575197;
        const _0x50a592 = yield Setting_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0xa8e819), _0x40e945 = {};
        _0x40e945[_0x2e166b(0x1a1)] = _0x2a276a[_0x2e166b(0x1a8)], _0x40e945[_0x2e166b(0x201)] = _0x1075e2;
        const _0x41e5bd = {};
        _0x41e5bd[_0x2e166b(0x1c2)] = _0x40e945;
        const _0x51202a = yield Setting_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0x41e5bd);
        if (_0x5c40c0) {
            const _0x1b181a = _0x2a276a[_0x2e166b(0x194)](_0x5c40c0[_0x2e166b(0x1a7)], _0x2a276a[_0x2e166b(0x1b7)]), _0x3ec07a = {};
            _0x3ec07a[_0x2e166b(0x201)] = _0x1075e2, _0x3ec07a[_0x2e166b(0x1da)] = _0x523f30['id'], _0x3ec07a[_0x2e166b(0x211) + _0x2e166b(0x234)] = _0x1b181a, yield (0x12b * 0x5 + -0x1235 + 0xc5e, UpdateDefaultTicketChatGptStatus_1[_0x2e166b(0x1ff)])(_0x3ec07a);
        }
        if (_0x50a592) {
            const _0x312049 = _0x2a276a[_0x2e166b(0x1f1)](_0x50a592[_0x2e166b(0x1a7)], _0x2a276a[_0x2e166b(0x1b7)]), _0x4b7901 = {};
            _0x4b7901[_0x2e166b(0x201)] = _0x1075e2, _0x4b7901[_0x2e166b(0x1da)] = _0x523f30['id'], _0x4b7901[_0x2e166b(0x211) + _0x2e166b(0x234)] = _0x312049, yield (-0x1f51 * -0x1 + -0x1 * -0x14f2 + -0x1 * 0x3443, UpdateDefaultTicketTypebotStatus_1[_0x2e166b(0x1ff)])(_0x4b7901);
        }
        if (_0x51202a) {
            const _0x75d960 = _0x2a276a[_0x2e166b(0x231)](_0x51202a[_0x2e166b(0x1a7)], _0x2a276a[_0x2e166b(0x1b7)]), _0x5cad09 = {};
            _0x5cad09[_0x2e166b(0x201)] = _0x1075e2, _0x5cad09[_0x2e166b(0x1da)] = _0x523f30['id'], _0x5cad09[_0x2e166b(0x211) + _0x2e166b(0x234)] = _0x75d960, yield (0x26ad * 0x1 + -0x26af + 0x1 * 0x2, UpdateDefaultDialogFlowStatus_1[_0x2e166b(0x1ff)])(_0x5cad09);
        }
        (_0x22ef5f && !_0x22ef5f[_0x2e166b(0x1f5)] || !_0x523f30[_0x2e166b(0x1f3)] || _0x484b6a) && (yield (-0x1f * 0x81 + 0x33d + 0x631 * 0x2, CheckChatBotFlowWelcome_1[_0x2e166b(0x1ff)])(_0x523f30));
        const _0x2d2e6b = {};
        _0x2d2e6b['id'] = _0x523f30['id'], _0x2d2e6b[_0x2e166b(0x201)] = _0x1075e2, _0x3593de = yield (0x336 + 0x20bc + -0x6b * 0x56, ShowTicketService_1[_0x2e166b(0x1ff)])(_0x2d2e6b), _0x3593de[_0x2e166b(0x215) + 'ue'](_0x2a276a[_0x2e166b(0x1b2)], !![]);
        const _0x445a32 = {};
        _0x445a32[_0x2e166b(0x201)] = _0x1075e2, _0x445a32[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1dd)], _0x445a32[_0x2e166b(0x1e6)] = _0x3593de, (0x25b8 + 0x261f + 0x6e5 * -0xb, socketEmit_1[_0x2e166b(0x1ff)])(_0x445a32);
        const _0x9825e3 = {};
        _0x9825e3['id'] = _0x1075e2;
        const _0x2e6645 = {};
        _0x2e6645[_0x2e166b(0x1c2)] = _0x9825e3;
        const _0x1faf76 = yield Tenant_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0x2e6645);
        if (_0x2a276a[_0x2e166b(0x1f1)](_0x2a276a[_0x2e166b(0x243)](_0x1faf76, null) || _0x2a276a[_0x2e166b(0x1f1)](_0x1faf76, void (0x1 * -0x1a1e + 0x23f + -0x9 * -0x2a7)) ? void (-0x2 * -0x29a + 0x11df + 0x1 * -0x1713) : _0x1faf76[_0x2e166b(0x19c)], _0x2a276a[_0x2e166b(0x1b7)]) && _0x2a276a[_0x2e166b(0x1ab)](_0x3593de[_0x2e166b(0x20e)], _0x2a276a[_0x2e166b(0x1d6)]) && _0x2a276a[_0x2e166b(0x1df)](_0x3593de[_0x2e166b(0x1f3)], null) && !_0x3593de[_0x2e166b(0x22d)] && !_0x420008) {
            const _0x435c4a = {};
            _0x435c4a[_0x2e166b(0x201)] = _0x1075e2, _0x435c4a[_0x2e166b(0x21c)] = _0x2a276a[_0x2e166b(0x23b)];
            const _0x2b86e8 = {};
            _0x2b86e8[_0x2e166b(0x1c2)] = _0x435c4a;
            const _0x121893 = yield User_1[_0x2e166b(0x1ff)][_0x2e166b(0x219)](_0x2b86e8);
            yield _0x3593de[_0x2e166b(0x223)]({
                'status': _0x2a276a[_0x2e166b(0x1d6)],
                'userId': (_0x2a276a[_0x2e166b(0x1f9)](_0x121893, null) || _0x2a276a[_0x2e166b(0x1ab)](_0x121893, void (-0xa * 0x2e + 0x2489 * 0x1 + -0x22bd)) ? void (-0x3 * -0xa77 + -0xf6a * -0x2 + -0x3e39 * 0x1) : _0x121893['id']) || null,
                'unreadMessages': _0x11dec7
            });
            const _0x2e8df8 = {};
            _0x2e8df8[_0x2e166b(0x201)] = _0x1075e2, _0x2e8df8[_0x2e166b(0x209)] = _0x2a276a[_0x2e166b(0x1dd)], _0x2e8df8[_0x2e166b(0x1e6)] = _0x3593de, (0x244c + -0x65b * 0x1 + 0x1df1 * -0x1, socketEmit_1[_0x2e166b(0x1ff)])(_0x2e8df8);
        }
        return _0x3593de;
    });
exports[_0x335c06(0x1ff)] = FindOrCreateTicketService;
function _0x1920() {
    const _0x43699c = [
        '6DBYEEs',
        'status',
        'isFarewell',
        'jvPCF',
        'newDefault',
        '3407250rpvwzI',
        'getTime',
        'tags',
        'setDataVal',
        'ls/User',
        'body',
        'endanceAt',
        'findOne',
        'erty',
        'AllTickets',
        'profile',
        'logFlowSta',
        './CreateLo',
        'sequelize',
        'pkLGi',
        'Emit',
        '48231Wojtbs',
        'update',
        'dialogflow',
        'admin',
        'etService',
        'LnkiI',
        'gcMzP',
        'fkCHh',
        'item_id',
        'vBOhQ',
        'MfrLZ',
        'chatFlowId',
        'llnuq',
        'messenger',
        'ixxHw',
        'BjFWS',
        'ers/Update',
        '420708TizRBl',
        'Value',
        'ers/socket',
        'getWallets',
        'unreadMess',
        'ers/CheckC',
        'WYzTt',
        'jmRSj',
        'HaOFs',
        'JIztn',
        'ls/Campaig',
        'istSetting',
        'pGZJZ',
        'HpJrC',
        'closed',
        'user',
        'gCCNr',
        'hatBotFlow',
        'startedAtt',
        '__importDe',
        'find',
        'iVqEG',
        'nQlEY',
        'tus',
        'tUfue',
        'xqYPK',
        'Welcome',
        'nContacts',
        'include',
        'forceAdmin',
        'telegram',
        'isCampaign',
        'ate',
        'OTTVZ',
        'key',
        'whatsapp',
        'contactId',
        'defineProp',
        '__awaiter',
        'attributes',
        'value',
        'Yfmbr',
        'VjvEy',
        'typebotAll',
        'eZZVz',
        'lastMessag',
        'ticket:upd',
        'enabled',
        'DefaultDia',
        'OcFqc',
        'etsToWalle',
        'RjocG',
        'order',
        'pending',
        'RAtsR',
        'gTicketSer',
        'woTJr',
        './ShowTick',
        'isGroup',
        'ticket',
        'includes',
        'message_id',
        'CwRQu',
        '../Setting',
        'ketTypebot',
        'apply',
        'KxjSz',
        'where',
        'DESC',
        'ages',
        'dlMtv',
        'DirectTick',
        'gjzMb',
        'Tickets',
        'OmJBd',
        'zWurf',
        'contact',
        'associatio',
        'OZVvf',
        'name',
        'ls/Ticket',
        'PuNlK',
        'ls/Message',
        '../../help',
        'throw',
        'SrVjA',
        'model',
        'ieIff',
        '2531336iqPrDz',
        'Status',
        'shgha',
        'ticketId',
        'gQVnu',
        'vice',
        'BDihj',
        '3056iFillm',
        'Aqitm',
        'fault',
        'channel',
        'updatedAt',
        'then',
        'next',
        '1841940mMXJHn',
        'payload',
        'aWcbh',
        'qEggg',
        'chatgptAll',
        'aCLSI',
        'instagram',
        '2749250EZqnkj',
        '42570AChecQ',
        'waba',
        'whatsappId',
        'open',
        'eTqZx',
        'BIvPY',
        'userId',
        'dgTye',
        'fromMe',
        'extraInfo',
        'wallets',
        'create',
        'JeZjQ',
        'ls/Contact',
        '__esModule',
        'isCreated',
        'Services/L',
        'ls/Tenant',
        'default',
        'YUlqe',
        'tenantId',
        'ketChatGpt',
        'tokenAPI',
        'Message',
        'JdpZQ',
        'done',
        '../../mode',
        'sService',
        'type',
        'DefaultTic',
        'aXlfH',
        'ls/Setting'
    ];
    _0x1920 = function () {
        return _0x43699c;
    };
    return _0x1920();
}